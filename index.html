<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æƒ…ä¾£è®°å¿† - ä¿å­˜æˆ‘ä»¬çš„ç¾å¥½æ—¶å…‰</title>
  <style>
    /* å…¨å±€æ ·å¼é‡ç½® */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* ç°ä»£èµ›åšæœ‹å…‹é£æ ¼èƒŒæ™¯ */
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Rajdhani', sans-serif;
      line-height: 1.6;
      color: #0ff;
      background-color: #050505;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(10, 255, 255, 0.15) 0%, transparent 25%),
        radial-gradient(circle at 80% 70%, rgba(255, 10, 150, 0.15) 0%, transparent 25%),
        radial-gradient(circle at 40% 80%, rgba(10, 255, 10, 0.1) 0%, transparent 20%),
        linear-gradient(to bottom, rgba(5, 5, 20, 0.95), rgba(5, 5, 15, 1));
      min-height: 100vh;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        linear-gradient(90deg, transparent 50%, rgba(10, 255, 255, 0.05) 50%),
        linear-gradient(transparent 50%, rgba(255, 10, 150, 0.05) 50%);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: 0;
      animation: gridMove 20s linear infinite;
    }

    @keyframes gridMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(60px, 60px); }
    }

    /* æ•°å­—é›¨æ•ˆæœ */
    .digital-rain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      opacity: 0.1;
    }

    /* å®¹å™¨æ ·å¼ */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 1;
    }

    /* å¡ç‰‡æ ·å¼ */
    .card {
      background-color: rgba(5, 5, 15, 0.9);
      border: 1px solid rgba(10, 255, 255, 0.4);
      border-radius: 12px;
      box-shadow: 
        0 0 25px rgba(10, 255, 255, 0.25),
        0 0 50px rgba(255, 10, 150, 0.15),
        inset 0 0 30px rgba(5, 5, 25, 0.7);
      padding: 45px;
      margin: 25px auto;
      max-width: 650px;
      backdrop-filter: blur(15px);
      animation: float 8s ease-in-out infinite, glow 4s ease-in-out infinite alternate;
      position: relative;
      overflow: hidden;
      border-top: 1px solid rgba(10, 255, 255, 0.6);
      border-left: 1px solid rgba(10, 255, 255, 0.6);
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(10, 255, 255, 0.15), transparent);
      animation: scan 4s ease-in-out infinite;
    }

    .card::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 100%;
      height: 1px;
      background: linear-gradient(90deg, transparent, #0ff, transparent);
      box-shadow: 0 0 10px rgba(10, 255, 255, 0.8);
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-12px) rotate(0.5deg); }
      66% { transform: translateY(-8px) rotate(-0.5deg); }
    }

    @keyframes glow {
      0% { 
        box-shadow: 
          0 0 25px rgba(10, 255, 255, 0.25),
          0 0 50px rgba(255, 10, 150, 0.15),
          inset 0 0 30px rgba(5, 5, 25, 0.7);
      }
      100% { 
        box-shadow: 
          0 0 35px rgba(10, 255, 255, 0.4),
          0 0 70px rgba(255, 10, 150, 0.25),
          inset 0 0 30px rgba(5, 5, 25, 0.7);
      }
    }

    @keyframes scan {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    /* æ ‡é¢˜æ ·å¼ */
    h1, h2, h3 {
      color: #0ff;
      text-align: center;
      margin-bottom: 25px;
      text-shadow: 
        0 0 15px rgba(10, 255, 255, 0.7),
        0 0 30px rgba(10, 255, 255, 0.3);
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 3px;
      font-weight: 700;
    }

    h1 {
      font-size: 3rem;
      font-weight: 900;
      background: linear-gradient(90deg, #0ff, #f0f, #0ff, #0f0);
      background-size: 300% 100%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: titleGlow 3s ease-in-out infinite alternate;
      margin-bottom: 30px;
    }

    h2 {
      font-size: 2.2rem;
      background: linear-gradient(90deg, #f0f, #0ff, #f0f);
      background-size: 250% 100%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: titleGlow 4s ease-in-out infinite alternate;
    }

    h3 {
      font-size: 1.5rem;
      background: linear-gradient(90deg, #0ff, #0f0, #0ff);
      background-size: 200% 100%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: titleGlow 5s ease-in-out infinite alternate;
      text-align: left;
    }

    @keyframes titleGlow {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    /* è¡¨å•æ ·å¼ */
    form {
      margin: 25px 0;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      margin-bottom: 12px;
      font-weight: 600;
      color: #0ff;
      text-shadow: 0 0 8px rgba(10, 255, 255, 0.7);
      font-size: 1.1rem;
      letter-spacing: 1px;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 15px 20px;
      background-color: rgba(5, 5, 20, 0.9);
      border: 1px solid rgba(10, 255, 255, 0.4);
      border-radius: 8px;
      font-size: 1.1rem;
      color: #0ff;
      transition: all 0.4s ease;
      font-family: 'Rajdhani', sans-serif;
      letter-spacing: 0.5px;
      border-left: 3px solid rgba(10, 255, 255, 0.6);
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: #f0f;
      box-shadow: 
        0 0 15px rgba(255, 10, 255, 0.6),
        0 0 30px rgba(255, 10, 255, 0.3);
      transform: translateY(-3px);
      border-left: 3px solid #f0f;
    }

    .form-group input::placeholder,
    .form-group textarea::placeholder,
    .form-group select::placeholder {
      color: rgba(10, 255, 255, 0.6);
      font-style: italic;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 120px;
      line-height: 1.6;
    }

    /* æŒ‰é’®æ ·å¼ */
    .btn {
      padding: 14px 28px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.4s ease;
      margin: 12px 8px;
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 2px;
      position: relative;
      overflow: hidden;
      text-transform: uppercase;
      min-width: 120px;
      text-align: center;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s ease;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background-color: rgba(10, 255, 255, 0.25);
      color: #0ff;
      border: 1px solid #0ff;
      box-shadow: 
        0 0 15px rgba(10, 255, 255, 0.4),
        inset 0 0 15px rgba(10, 255, 255, 0.1);
    }

    .btn-primary:hover {
      background-color: rgba(10, 255, 255, 0.4);
      box-shadow: 
        0 0 25px rgba(10, 255, 255, 0.8),
        0 0 50px rgba(10, 255, 255, 0.4),
        inset 0 0 20px rgba(10, 255, 255, 0.2);
      transform: translateY(-4px);
    }

    .btn-secondary {
      background-color: rgba(255, 10, 255, 0.25);
      color: #f0f;
      border: 1px solid #f0f;
      box-shadow: 
        0 0 15px rgba(255, 10, 255, 0.4),
        inset 0 0 15px rgba(255, 10, 255, 0.1);
    }

    .btn-secondary:hover {
      background-color: rgba(255, 10, 255, 0.4);
      box-shadow: 
        0 0 25px rgba(255, 10, 255, 0.8),
        0 0 50px rgba(255, 10, 255, 0.4),
        inset 0 0 20px rgba(255, 10, 255, 0.2);
      transform: translateY(-4px);
    }

    .btn-danger {
      background-color: rgba(255, 10, 10, 0.25);
      color: #f00;
      border: 1px solid #f00;
      box-shadow: 
        0 0 15px rgba(255, 10, 10, 0.4),
        inset 0 0 15px rgba(255, 10, 10, 0.1);
    }

    .btn-danger:hover {
      background-color: rgba(255, 10, 10, 0.4);
      box-shadow: 
        0 0 25px rgba(255, 10, 10, 0.8),
        0 0 50px rgba(255, 10, 10, 0.4),
        inset 0 0 20px rgba(255, 10, 10, 0.2);
      transform: translateY(-4px);
    }

    .btn-icon {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-icon i {
      font-size: 1.2rem;
    }

    /* å›¾ç‰‡ç½‘æ ¼ */
    .image-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 35px;
      margin: 35px 0;
    }

    .image-card {
      background-color: rgba(5, 5, 15, 0.9);
      border: 1px solid rgba(10, 255, 255, 0.4);
      border-radius: 12px;
      box-shadow: 
        0 0 25px rgba(10, 255, 255, 0.25),
        0 0 50px rgba(255, 10, 150, 0.15);
      overflow: hidden;
      transition: all 0.4s ease;
      backdrop-filter: blur(15px);
      position: relative;
      cursor: pointer;
      border-top: 1px solid rgba(10, 255, 255, 0.6);
      border-left: 1px solid rgba(10, 255, 255, 0.6);
    }

    .image-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 
        0 0 35px rgba(10, 255, 255, 0.5),
        0 0 70px rgba(255, 10, 150, 0.3),
        0 0 100px rgba(10, 255, 10, 0.1);
      border-color: #f0f;
    }

    .image-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, transparent 40%, rgba(10, 255, 255, 0.15) 50%, transparent 60%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .image-card:hover::before {
      transform: translateX(100%);
    }

    .image-card::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 100%;
      height: 1px;
      background: linear-gradient(90deg, transparent, #0ff, transparent);
      box-shadow: 0 0 10px rgba(10, 255, 255, 0.8);
      transform: scaleX(0);
      transition: transform 0.4s ease;
    }

    .image-card:hover::after {
      transform: scaleX(1);
    }

    .image-thumbnail {
      position: relative;
      padding-top: 75%;
      overflow: hidden;
      border-bottom: 1px solid rgba(10, 255, 255, 0.4);
    }

    .image-thumbnail img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.6s ease, filter 0.6s ease;
    }

    .image-card:hover .image-thumbnail img {
      transform: scale(1.1);
      filter: brightness(1.25) contrast(1.1) saturate(1.1);
    }

    .image-info {
      padding: 25px;
    }

    .image-info h3 {
      font-size: 1.3rem;
      color: #0ff;
      margin-bottom: 15px;
      text-align: left;
      text-shadow: 0 0 10px rgba(10, 255, 255, 0.7);
      font-family: 'Rajdhani', sans-serif;
      font-weight: 600;
      letter-spacing: 1px;
    }

    .image-meta {
      font-size: 1rem;
      color: rgba(10, 255, 255, 0.7);
      font-family: 'Rajdhani', sans-serif;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }

    .image-meta span {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .image-meta i {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    /* é”™è¯¯æ¶ˆæ¯ */
    .error-message {
      color: #f00;
      margin: 15px 0;
      text-align: center;
      text-shadow: 0 0 5px rgba(255, 10, 10, 0.5);
      font-family: 'Courier New', monospace;
    }

    /* æˆåŠŸæ¶ˆæ¯ */
    .success-message {
      color: #0f0;
      margin: 15px 0;
      text-align: center;
      text-shadow: 0 0 5px rgba(10, 255, 10, 0.5);
      font-family: 'Courier New', monospace;
    }

    /* åŠ è½½çŠ¶æ€ */
    .loading {
      text-align: center;
      padding: 40px;
      color: #0ff;
      text-shadow: 0 0 5px rgba(10, 255, 255, 0.5);
      font-family: 'Courier New', monospace;
    }

    .loading::after {
      content: "";
      display: inline-block;
      width: 30px;
      height: 30px;
      border: 3px solid rgba(10, 255, 255, 0.3);
      border-top: 3px solid #0ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 15px;
      box-shadow: 0 0 10px rgba(10, 255, 255, 0.5);
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ç©ºçŠ¶æ€ */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      background-color: rgba(10, 10, 20, 0.8);
      border: 1px solid rgba(10, 255, 255, 0.3);
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(10, 255, 255, 0.2);
    }

    .empty-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      filter: drop-shadow(0 0 10px rgba(10, 255, 255, 0.5));
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .card {
        padding: 30px 20px;
      }

      h1 {
        font-size: 2rem;
      }

      h2 {
        font-size: 1.8rem;
      }

      .image-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
      }

      .btn {
        display: block;
        width: 100%;
        margin: 10px 0;
      }
    }

    /* æ¨¡æ€æ¡† */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(5px);
    }

    .modal.show {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: rgba(10, 10, 20, 0.9);
      border: 1px solid #0ff;
      padding: 40px;
      border-radius: 10px;
      max-width: 800px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 0 30px rgba(10, 255, 255, 0.3);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      border-bottom: 1px solid rgba(10, 255, 255, 0.3);
      padding-bottom: 20px;
    }

    .close {
      font-size: 2rem;
      cursor: pointer;
      color: #0ff;
      text-shadow: 0 0 5px rgba(10, 255, 255, 0.5);
    }

    .close:hover {
      color: #f0f;
      text-shadow: 0 0 5px rgba(255, 10, 255, 0.5);
    }

    /* ä¸Šä¼ åŒºåŸŸ */
    .file-drop-area {
      border: 2px dashed rgba(10, 255, 255, 0.5);
      border-radius: 10px;
      padding: 40px 20px;
      text-align: center;
      margin: 20px 0;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: rgba(10, 10, 30, 0.5);
      position: relative;
      overflow: hidden;
    }

    .file-drop-area:hover {
      border-color: #f0f;
      background-color: rgba(10, 10, 40, 0.5);
      box-shadow: 0 0 20px rgba(10, 255, 255, 0.3);
    }

    .file-drop-area.drag-over {
      border-color: #f0f;
      background-color: rgba(10, 10, 40, 0.7);
      box-shadow: 0 0 30px rgba(255, 10, 255, 0.4);
      transform: scale(1.02);
    }

    .file-drop-area::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(10, 255, 255, 0.1), transparent);
      animation: scan 3s ease-in-out infinite;
    }

    .file-drop-text {
      position: relative;
      z-index: 1;
    }

    .file-drop-text p {
      margin: 5px 0;
      color: rgba(10, 255, 255, 0.8);
      text-shadow: 0 0 5px rgba(10, 255, 255, 0.3);
      font-family: 'Courier New', monospace;
    }

    .file-drop-hint {
      font-size: 0.9rem;
      color: rgba(10, 255, 255, 0.5);
    }

    /* é¢„è§ˆç½‘æ ¼ */
    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
      margin-top: 20px;
    }

    .preview-item {
      position: relative;
      width: 100%;
      padding-top: 100%;
      overflow: hidden;
      border-radius: 5px;
      border: 1px solid rgba(10, 255, 255, 0.3);
      box-shadow: 0 0 10px rgba(10, 255, 255, 0.2);
    }

    .preview-item img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .preview-item:hover img {
      transform: scale(1.1);
    }

    /* ä¸Šä¼ è¿›åº¦ */
    .upload-progress {
      margin: 20px 0;
      position: relative;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background-color: rgba(10, 10, 30, 0.8);
      border: 1px solid rgba(10, 255, 255, 0.3);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #0ff, #f0f, #0ff);
      background-size: 200% 100%;
      border-radius: 10px;
      transition: width 0.3s ease;
      animation: progressGlow 2s ease-in-out infinite alternate;
      box-shadow: 0 0 10px rgba(10, 255, 255, 0.5);
    }

    @keyframes progressGlow {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    /* å¤´éƒ¨å¯¼èˆª */
    .header {
      background-color: rgba(10, 10, 20, 0.9);
      border: 1px solid rgba(10, 255, 255, 0.3);
      color: #0ff;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 20px rgba(10, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(10, 255, 255, 0.1), transparent);
      animation: scan 3s ease-in-out infinite;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      z-index: 1;
    }

    .header h1 {
      color: #0ff;
      margin: 0;
    }

    .header-actions {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .welcome-text {
      font-weight: bold;
      color: #0ff;
      text-shadow: 0 0 5px rgba(10, 255, 255, 0.5);
      font-family: 'Courier New', monospace;
    }

    /* å›¾ç‰‡è¯¦æƒ… */
    .image-detail {
      max-width: 800px;
      margin: 0 auto;
    }

    .image-container {
      text-align: center;
      margin: 30px 0;
      position: relative;
    }

    .image-container img {
      max-width: 100%;
      max-height: 600px;
      border-radius: 10px;
      border: 1px solid rgba(10, 255, 255, 0.3);
      box-shadow: 0 0 30px rgba(10, 255, 255, 0.2);
      transition: all 0.3s ease;
    }

    .image-container img:hover {
      box-shadow: 0 0 50px rgba(10, 255, 255, 0.4);
      transform: scale(1.02);
    }

    .detail-info {
      background-color: rgba(10, 10, 20, 0.8);
      border: 1px solid rgba(10, 255, 255, 0.3);
      border-radius: 10px;
      padding: 30px;
      margin-top: 30px;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 20px rgba(10, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    .detail-info::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(10, 255, 255, 0.1), transparent);
      animation: scan 3s ease-in-out infinite;
    }

    .detail-meta {
      margin: 20px 0;
      position: relative;
      z-index: 1;
    }

    .detail-meta p {
      margin: 10px 0;
      color: rgba(10, 255, 255, 0.8);
      font-size: 1.1rem;
      font-family: 'Courier New', monospace;
      text-shadow: 0 0 5px rgba(10, 255, 255, 0.3);
    }

    /* çˆ±å¿ƒåŠ¨ç”» */
    .heart-icon {
      font-size: 2rem;
      animation: pulse 2s infinite;
      text-align: center;
      margin: 20px 0;
      filter: drop-shadow(0 0 10px rgba(255, 10, 150, 0.5));
    }

    @keyframes pulse {
      0% { transform: scale(1); filter: drop-shadow(0 0 10px rgba(255, 10, 150, 0.5)); }
      50% { transform: scale(1.1); filter: drop-shadow(0 0 20px rgba(255, 10, 150, 0.8)); }
      100% { transform: scale(1); filter: drop-shadow(0 0 10px rgba(255, 10, 150, 0.5)); }
    }

    /* é“¾æ¥æ ·å¼ */
    a {
      color: #0ff;
      text-decoration: none;
      transition: all 0.3s ease;
      text-shadow: 0 0 5px rgba(10, 255, 255, 0.5);
    }

    a:hover {
      color: #f0f;
      text-shadow: 0 0 5px rgba(255, 10, 255, 0.5);
    }

    /* è¾“å…¥æ¡†å’ŒæŒ‰é’®çš„èšç„¦æ•ˆæœ */
    input:focus,
    textarea:focus,
    button:focus {
      outline: 2px solid rgba(255, 10, 255, 0.5);
    }

    /* æ»šåŠ¨æ¡æ ·å¼ */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(10, 10, 20, 0.8);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(10, 255, 255, 0.3);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(10, 255, 255, 0.5);
    }

    /* å¤é€‰æ¡†å’Œå•é€‰æ¡†æ ·å¼ */
    input[type="radio"],
    input[type="checkbox"] {
      accent-color: #0ff;
      box-shadow: 0 0 5px rgba(10, 255, 255, 0.5);
    }

    /* é€‰æ‹©æ¡†æ ·å¼ */
    select {
      background-color: rgba(10, 10, 30, 0.8);
      border: 1px solid rgba(10, 255, 255, 0.3);
      color: #0ff;
      padding: 10px;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
    }

    select:focus {
      outline: none;
      border-color: #f0f;
      box-shadow: 0 0 10px rgba(255, 10, 255, 0.5);
    }

    /* ä¸ªäººä¸­å¿ƒæ ·å¼ */
    .profile-section {
      margin-bottom: 40px;
      padding-bottom: 30px;
      border-bottom: 1px solid rgba(10, 255, 255, 0.2);
    }

    .profile-section:last-child {
      border-bottom: none;
    }

    .profile-section h3 {
      color: #f0f;
      text-align: left;
      margin-bottom: 20px;
      text-shadow: 0 0 5px rgba(255, 10, 255, 0.5);
    }

    .profile-info {
      background-color: rgba(10, 10, 30, 0.5);
      padding: 20px;
      border-radius: 10px;
      border: 1px solid rgba(10, 255, 255, 0.2);
    }

    .profile-info p {
      margin: 10px 0;
      color: rgba(10, 255, 255, 0.8);
      font-family: 'Courier New', monospace;
    }

    /* ç»Ÿè®¡å¡ç‰‡æ ·å¼ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .stat-card {
      background-color: rgba(10, 10, 30, 0.5);
      border: 1px solid rgba(10, 255, 255, 0.3);
      border-radius: 10px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 0 15px rgba(10, 255, 255, 0.2);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 25px rgba(10, 255, 255, 0.4);
      border-color: #f0f;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: bold;
      color: #0ff;
      text-shadow: 0 0 10px rgba(10, 255, 255, 0.5);
      font-family: 'Orbitron', sans-serif;
    }

    .stat-label {
      font-size: 1rem;
      color: rgba(10, 255, 255, 0.7);
      margin-top: 10px;
      font-family: 'Courier New', monospace;
    }

    /* ä¸ªäººä¸­å¿ƒè¡¨å•æ ·å¼ */
    #profile-form {
      margin-top: 20px;
    }

    #profile-form .form-group {
      margin-bottom: 20px;
    }

    #profile-form .btn {
      margin-top: 20px;
    }

    /* å“åº”å¼ä¸ªäººä¸­å¿ƒ */
    @media (max-width: 768px) {
      .stats-grid {
        grid-template-columns: 1fr;
      }

      .stat-card {
        padding: 20px;
      }

      .stat-number {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <!-- ç™»å½•é¡µé¢ -->
  <div id="login-page" class="container">
    <div class="card">
      <div class="heart-icon">â¤ï¸</div>
      <h1>æƒ…ä¾£è®°å¿†</h1>
      <p style="text-align: center; margin-bottom: 30px; color: rgba(10, 255, 255, 0.8); text-shadow: 0 0 5px rgba(10, 255, 255, 0.3);">ä¿å­˜æˆ‘ä»¬çš„ç¾å¥½æ—¶å…‰</p>
      
      <!-- ç™»å½•/æ³¨å†Œåˆ‡æ¢ -->
      <div style="
        display: flex;
        margin-bottom: 30px;
        border-bottom: 1px solid rgba(10, 255, 255, 0.3);
      ">
        <button 
          onclick="showLoginForm()"
          id="login-tab"
          style="
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            color: #0ff;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid #0ff;
            text-shadow: 0 0 8px rgba(10, 255, 255, 0.7);
          "
        >
          ç™»å½•
        </button>
        <button 
          onclick="showRegisterForm()"
          id="register-tab"
          style="
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            color: rgba(10, 255, 255, 0.6);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
          "
        >
          æ³¨å†Œ
        </button>
      </div>
      
      <!-- ç™»å½•è¡¨å• -->
      <form id="login-form">
        <div class="form-group">
          <label for="login-username">ç”¨æˆ·å/é‚®ç®±</label>
          <input type="text" id="login-username" required>
        </div>
        <div class="form-group">
          <label for="login-password">å¯†ç </label>
          <input type="password" id="login-password" required>
        </div>
        <div class="error-message" id="login-error"></div>
        <button type="submit" class="btn btn-primary">ç™»å½•</button>
      </form>
      
      <!-- æ³¨å†Œè¡¨å• -->
      <form id="register-form" style="display: none;">
        <div class="form-group">
          <label for="register-username">ç”¨æˆ·å</label>
          <input type="text" id="register-username" required>
        </div>
        <div class="form-group">
          <label for="register-email">QQé‚®ç®±</label>
          <input type="email" id="register-email" required>
        </div>
        <div class="form-group">
          <label for="register-password">å¯†ç </label>
          <input type="password" id="register-password" required>
        </div>
        <div class="form-group">
          <label for="register-confirm-password">ç¡®è®¤å¯†ç </label>
          <input type="password" id="register-confirm-password" required>
        </div>
        <div class="error-message" id="register-error"></div>
        <div class="success-message" id="register-success" style="display: none;">æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•</div>
        <button type="submit" class="btn btn-primary">æ³¨å†Œ</button>
      </form>
      
      <div style="margin-top: 20px; text-align: center; color: rgba(10, 255, 255, 0.6); font-family: 'Courier New', monospace;">
        <p>æç¤ºï¼šä½¿ç”¨ä»¥ä¸‹è´¦å·ç™»å½•</p>
        <p>ç”¨æˆ·å: boyfriend / girlfriend</p>
        <p>å¯†ç : love123</p>
      </div>
    </div>
  </div>

  <!-- ä¸»é¡µé¢ -->
  <div id="home-page" class="container" style="display: none;">
    <div class="header">
      <div class="header-content">
        <h1>æƒ…ä¾£è®°å¿†</h1>
        <div class="header-actions">
          <span class="welcome-text" id="welcome-text"></span>
          <button class="btn btn-primary" onclick="showUploadPage()">ä¸Šä¼ å›¾ç‰‡</button>
          <button class="btn btn-secondary" onclick="showProfilePage()">ä¸ªäººä¸­å¿ƒ</button>
          <button class="btn btn-secondary" onclick="logout()">é€€å‡º</button>
        </div>
      </div>
    </div>

    <h2>æˆ‘ä»¬çš„ç¾å¥½æ—¶å…‰</h2>
    
    <!-- æœç´¢å’Œç­›é€‰ç•Œé¢ -->
    <div style="
      background-color: rgba(5, 5, 15, 0.9);
      border: 1px solid rgba(10, 255, 255, 0.4);
      border-radius: 12px;
      padding: 25px;
      margin: 25px 0;
      box-shadow: 
        0 0 25px rgba(10, 255, 255, 0.25),
        0 0 50px rgba(255, 10, 150, 0.15);
      backdrop-filter: blur(15px);
    ">
      <div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-end;">
        <!-- æœç´¢è¾“å…¥ -->
        <div style="flex: 1; min-width: 300px;">
          <label style="
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #0ff;
            text-shadow: 0 0 8px rgba(10, 255, 255, 0.7);
            font-size: 1.1rem;
          ">æœç´¢å›¾ç‰‡</label>
          <input 
            type="text" 
            id="search-input" 
            placeholder="è¾“å…¥å…³é”®è¯æœç´¢å›¾ç‰‡æè¿°æˆ–æ ‡ç­¾..."
            style="
              width: 100%;
              padding: 12px 16px;
              background-color: rgba(5, 5, 20, 0.9);
              border: 1px solid rgba(10, 255, 255, 0.4);
              border-radius: 8px;
              font-size: 1rem;
              color: #0ff;
              border-left: 3px solid rgba(10, 255, 255, 0.6);
            "
          >
        </div>
        
        <!-- æ ‡ç­¾ç­›é€‰ -->
        <div style="flex: 1; min-width: 300px;">
          <label style="
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #0ff;
            text-shadow: 0 0 8px rgba(10, 255, 255, 0.7);
            font-size: 1.1rem;
          ">æŒ‰æ ‡ç­¾ç­›é€‰</label>
          <select 
            id="tag-filter" 
            style="
              width: 100%;
              padding: 12px 16px;
              background-color: rgba(5, 5, 20, 0.9);
              border: 1px solid rgba(10, 255, 255, 0.4);
              border-radius: 8px;
              font-size: 1rem;
              color: #0ff;
              border-left: 3px solid rgba(10, 255, 255, 0.6);
            "
          >
            <option value="">æ‰€æœ‰æ ‡ç­¾</option>
            <!-- æ ‡ç­¾é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
          </select>
        </div>
        
        <!-- æœç´¢æŒ‰é’® -->
        <div style="flex-shrink: 0;">
          <button 
            onclick="performSearch()"
            style="
              padding: 12px 24px;
              background-color: rgba(10, 255, 255, 0.25);
              color: #0ff;
              border: 1px solid #0ff;
              border-radius: 8px;
              cursor: pointer;
              font-size: 1rem;
              font-weight: 600;
              transition: all 0.4s ease;
              box-shadow: 
                0 0 15px rgba(10, 255, 255, 0.4),
                inset 0 0 15px rgba(10, 255, 255, 0.1);
            "
          >
            æœç´¢
          </button>
        </div>
      </div>
      
      <!-- æœç´¢ç»“æœç»Ÿè®¡ -->
      <div id="search-results" style="
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid rgba(10, 255, 255, 0.3);
        color: rgba(10, 255, 255, 0.7);
        font-size: 0.9rem;
      ">
        æ˜¾ç¤ºæ‰€æœ‰å›¾ç‰‡
      </div>
    </div>
    
    <div id="loading" class="loading">åŠ è½½ä¸­</div>
    <div id="empty-state" class="empty-state" style="display: none;">
      <div class="empty-icon">ğŸ“·</div>
      <h3>è¿˜æ²¡æœ‰å›¾ç‰‡</h3>
      <p style="color: rgba(10, 255, 255, 0.8); text-shadow: 0 0 5px rgba(10, 255, 255, 0.3);">ä¸Šä¼ ä¸€äº›æˆ‘ä»¬çš„ç¾å¥½å›å¿†å§</p>
      <button class="btn btn-primary" onclick="showUploadPage()">ä¸Šä¼ ç¬¬ä¸€å¼ å›¾ç‰‡</button>
    </div>
    <div id="image-grid" class="image-grid"></div>
  </div>

  <!-- ä¸Šä¼ é¡µé¢ -->
  <div id="upload-page" class="container" style="display: none;">
    <div class="header">
      <div class="header-content">
        <h1>æƒ…ä¾£è®°å¿†</h1>
        <div class="header-actions">
          <span class="welcome-text" id="upload-welcome-text"></span>
          <button class="btn btn-secondary" onclick="showProfilePage()">ä¸ªäººä¸­å¿ƒ</button>
          <button class="btn btn-secondary" onclick="showHomePage()">è¿”å›é¦–é¡µ</button>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>ä¸Šä¼ å›¾ç‰‡</h2>
      <form id="upload-form">
        <div class="form-group">
          <label>å›¾ç‰‡æ¥æº</label>
          <div style="display: flex; gap: 20px; margin-top: 10px;">
            <label>
              <input type="radio" name="image-source" value="url" checked>
              ç½‘ç»œURL
            </label>
            <label>
              <input type="radio" name="image-source" value="local">
              æœ¬åœ°æ–‡ä»¶
            </label>
          </div>
        </div>

        <div id="url-input" class="form-group">
          <label for="image-url">å›¾ç‰‡URL</label>
          <input type="text" id="image-url" placeholder="è¾“å…¥å›¾ç‰‡çš„URLåœ°å€">
        </div>

        <div id="file-input" class="form-group" style="display: none;">
          <label for="image-files">é€‰æ‹©æœ¬åœ°æ–‡ä»¶</label>
          <div class="file-drop-area" id="file-drop-area">
            <input type="file" id="image-files" multiple accept="image/*">
            <div class="file-drop-text">
              <p>ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„ä¸Šä¼ </p>
              <p style="font-size: 0.9rem; color: #999;">æ”¯æŒå¤šå¼ å›¾ç‰‡åŒæ—¶ä¸Šä¼ </p>
            </div>
          </div>
          <div id="preview-grid" class="preview-grid"></div>
        </div>

        <div class="form-group">
          <label for="description">å›¾ç‰‡æè¿°</label>
          <textarea id="description" rows="4" placeholder="ä¸ºå›¾ç‰‡æ·»åŠ æè¿°..."></textarea>
        </div>

        <div class="form-group">
          <label for="tags">æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
          <input type="text" id="tags" placeholder="ä¾‹å¦‚ï¼šæ—…è¡Œ, çº¦ä¼š, çºªå¿µæ—¥, ç¾é£Ÿ">
          <p style="margin-top: 8px; font-size: 0.9rem; color: rgba(10, 255, 255, 0.6);">
            æ ‡ç­¾å°†å¸®åŠ©ä½ æ›´å¥½åœ°åˆ†ç±»å’ŒæŸ¥æ‰¾å›¾ç‰‡
          </p>
        </div>

        <div id="upload-progress" class="upload-progress" style="display: none;">
          <div class="progress-bar">
            <div class="progress-fill" style="width: 0%;"></div>
          </div>
          <p>ä¸Šä¼ è¿›åº¦: <span id="progress-percent">0</span>%</p>
        </div>

        <button type="submit" class="btn btn-primary">ä¸Šä¼ å›¾ç‰‡</button>
      </form>
    </div>
  </div>

  <!-- å›¾ç‰‡è¯¦æƒ…é¡µé¢ -->
  <div id="image-detail-page" class="container" style="display: none;">
    <div class="header">
      <div class="header-content">
        <h1>æƒ…ä¾£è®°å¿†</h1>
        <div class="header-actions">
          <span class="welcome-text" id="detail-welcome-text"></span>
          <button class="btn btn-primary" onclick="showUploadPage()">ä¸Šä¼ å›¾ç‰‡</button>
          <button class="btn btn-secondary" onclick="showProfilePage()">ä¸ªäººä¸­å¿ƒ</button>
          <button class="btn btn-secondary" onclick="showHomePage()">è¿”å›é¦–é¡µ</button>
        </div>
      </div>
    </div>

    <div class="image-detail">
      <div id="detail-loading" class="loading">åŠ è½½ä¸­</div>
      <div id="detail-content" style="display: none;">
        <div class="image-container">
          <img id="detail-image" src="" alt="" style="cursor: pointer;" onclick="toggleFullscreen(this)">
          <div style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
          ">
            <button class="btn btn-primary" onclick="navigateImage('prev')" id="prev-btn">ä¸Šä¸€å¼ </button>
            <span id="image-counter" style="color: rgba(10, 255, 255, 0.8); font-size: 1.1rem; font-weight: 600;"></span>
            <button class="btn btn-primary" onclick="navigateImage('next')" id="next-btn">ä¸‹ä¸€å¼ </button>
          </div>
        </div>
        <div class="detail-info">
          <h2 id="detail-description"></h2>
          <div class="detail-meta">
            <p><strong>ä¸Šä¼ è€…:</strong> <span id="detail-uploader"></span></p>
            <p><strong>ä¸Šä¼ æ—¶é—´:</strong> <span id="detail-time"></span></p>
          </div>
          
          <!-- äº’åŠ¨åŠŸèƒ½å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
          <div id="interaction-section"></div>
          
          <button class="btn btn-danger" onclick="deleteImage()">åˆ é™¤å›¾ç‰‡</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
  <div id="profile-page" class="container" style="display: none;">
    <div class="header">
      <div class="header-content">
        <h1>æƒ…ä¾£è®°å¿†</h1>
        <div class="header-actions">
          <span class="welcome-text" id="profile-welcome-text"></span>
          <button class="btn btn-primary" onclick="showUploadPage()">ä¸Šä¼ å›¾ç‰‡</button>
          <button class="btn btn-secondary" onclick="showHomePage()">è¿”å›é¦–é¡µ</button>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>ä¸ªäººä¸­å¿ƒ</h2>
      
      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <div class="profile-section">
        <h3>ç”¨æˆ·ä¿¡æ¯</h3>
        <div style="
          background-color: rgba(5, 5, 15, 0.9);
          border: 1px solid rgba(10, 255, 255, 0.4);
          border-radius: 12px;
          padding: 25px;
          margin-bottom: 20px;
          box-shadow: 
            0 0 25px rgba(10, 255, 255, 0.25),
            0 0 50px rgba(255, 10, 150, 0.15);
        ">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h4 style="
              color: #f0f;
              margin: 0;
              text-shadow: 0 0 10px rgba(255, 10, 150, 0.7);
            ">ä¸ªäººèµ„æ–™</h4>
            <button 
              onclick="toggleEditProfile()"
              id="edit-profile-btn"
              style="
                padding: 8px 16px;
                background-color: rgba(10, 255, 255, 0.25);
                color: #0ff;
                border: 1px solid #0ff;
                border-radius: 8px;
                cursor: pointer;
                font-size: 0.9rem;
                font-weight: 600;
                transition: all 0.4s ease;
                box-shadow: 
                  0 0 15px rgba(10, 255, 255, 0.4),
                  inset 0 0 15px rgba(10, 255, 255, 0.1);
              "
            >
              ç¼–è¾‘èµ„æ–™
            </button>
          </div>
          
          <!-- æŸ¥çœ‹æ¨¡å¼ -->
          <div id="profile-view">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
              <div>
                <p style="
                  color: rgba(10, 255, 255, 0.8);
                  margin-bottom: 10px;
                ">
                  <strong style="color: #f0f;">ç”¨æˆ·å:</strong> <span id="profile-username"></span>
                </p>
                <p style="
                  color: rgba(10, 255, 255, 0.8);
                  margin-bottom: 10px;
                ">
                  <strong style="color: #f0f;">é‚®ç®±:</strong> <span id="profile-email"></span>
                </p>
                <p style="
                  color: rgba(10, 255, 255, 0.8);
                  margin-bottom: 10px;
                ">
                  <strong style="color: #f0f;">æ³¨å†Œæ—¶é—´:</strong> <span id="profile-joined-date"></span>
                </p>
              </div>
              <div>
                <p style="
                  color: rgba(10, 255, 255, 0.8);
                  margin-bottom: 10px;
                ">
                  <strong style="color: #f0f;">ä¸Šæ¬¡ç™»å½•:</strong> <span id="profile-last-login"></span>
                </p>
                <p style="
                  color: rgba(10, 255, 255, 0.8);
                  margin-bottom: 10px;
                ">
                  <strong style="color: #f0f;">ä¸Šä¼ æ•°:</strong> <span id="profile-upload-count">0</span>
                </p>
              </div>
            </div>
          </div>
          
          <!-- ç¼–è¾‘æ¨¡å¼ -->
          <div id="profile-edit" style="display: none;">
            <form id="profile-edit-form">
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div class="form-group">
                  <label for="edit-username">ç”¨æˆ·å</label>
                  <input type="text" id="edit-username" required>
                </div>
                <div class="form-group">
                  <label for="edit-email">QQé‚®ç®±</label>
                  <input type="email" id="edit-email" required>
                </div>
              </div>
              <div class="success-message" id="profile-update-success" style="display: none;">ä¸ªäººä¿¡æ¯æ›´æ–°æˆåŠŸï¼</div>
              <div class="error-message" id="profile-update-error" style="display: none;"></div>
              <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button type="submit" class="btn btn-primary">ä¿å­˜æ›´æ”¹</button>
                <button type="button" onclick="toggleEditProfile()" class="btn btn-secondary">å–æ¶ˆ</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- ä¸Šä¼ ç»Ÿè®¡ -->
      <div class="profile-section">
        <h3>ä¸Šä¼ ç»Ÿè®¡</h3>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number" id="total-uploads">0</div>
            <div class="stat-label">æ€»ä¸Šä¼ æ•°</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="recent-uploads">0</div>
            <div class="stat-label">æœ€è¿‘ä¸Šä¼ </div>
          </div>
        </div>
      </div>

      <!-- æœ€è¿‘ä¸Šä¼ çš„å›¾ç‰‡ -->
      <div class="profile-section">
        <h3>æœ€è¿‘ä¸Šä¼ </h3>
        <div id="recent-images" class="image-grid"></div>
        <div id="no-recent-images" style="display: none; text-align: center; padding: 20px;">
          <p>æš‚æ— ä¸Šä¼ è®°å½•</p>
        </div>
      </div>

      <!-- çºªå¿µæ—¥ç®¡ç† -->
      <div class="profile-section">
        <h3>çºªå¿µæ—¥ç®¡ç†</h3>
        <div style="
          background-color: rgba(5, 5, 15, 0.9);
          border: 1px solid rgba(10, 255, 255, 0.4);
          border-radius: 12px;
          padding: 25px;
          margin-bottom: 20px;
          box-shadow: 
            0 0 25px rgba(10, 255, 255, 0.25),
            0 0 50px rgba(255, 10, 150, 0.15);
        ">
          <h4 style="
            color: #f0f;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 10, 150, 0.7);
          ">æ·»åŠ ç‰¹æ®Šçºªå¿µæ—¥</h4>
          <form id="anniversary-form">
            <div style="display: flex; flex-wrap: wrap; gap: 15px;">
              <div class="form-group" style="flex: 1; min-width: 200px;">
                <label for="anniversary-title">çºªå¿µæ—¥åç§°</label>
                <input type="text" id="anniversary-title" placeholder="ä¾‹å¦‚ï¼šæ‹çˆ±çºªå¿µæ—¥" required>
              </div>
              <div class="form-group" style="flex: 1; min-width: 200px;">
                <label for="anniversary-date">æ—¥æœŸ</label>
                <input type="date" id="anniversary-date" required>
              </div>
              <div style="flex-shrink: 0; align-self: flex-end;">
                <button type="submit" class="btn btn-primary">æ·»åŠ </button>
              </div>
            </div>
          </form>
        </div>
        
        <div id="anniversaries-list" style="
          background-color: rgba(5, 5, 15, 0.9);
          border: 1px solid rgba(10, 255, 255, 0.4);
          border-radius: 12px;
          padding: 25px;
          box-shadow: 
            0 0 25px rgba(10, 255, 255, 0.25),
            0 0 50px rgba(255, 10, 150, 0.15);
        ">
          <h4 style="
            color: #f0f;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 10, 150, 0.7);
          ">æˆ‘çš„çºªå¿µæ—¥</h4>
          <div id="anniversaries-container">
            <!-- çºªå¿µæ—¥åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
          </div>
          <div id="no-anniversaries" style="
            text-align: center;
            padding: 40px;
            color: rgba(10, 255, 255, 0.7);
          ">
            è¿˜æ²¡æœ‰æ·»åŠ çºªå¿µæ—¥ï¼Œç‚¹å‡»ä¸Šæ–¹æ·»åŠ ç¬¬ä¸€ä¸ªçºªå¿µæ—¥å§ï¼
          </div>
        </div>
      </div>

      <!-- ä¸»é¢˜åˆ‡æ¢ -->
      <div class="profile-section">
        <h3>ä¸»é¢˜è®¾ç½®</h3>
        <div style="
          background-color: rgba(5, 5, 15, 0.9);
          border: 1px solid rgba(10, 255, 255, 0.4);
          border-radius: 12px;
          padding: 25px;
          box-shadow: 
            0 0 25px rgba(10, 255, 255, 0.25),
            0 0 50px rgba(255, 10, 150, 0.15);
        ">
          <h4 style="
            color: #f0f;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 10, 150, 0.7);
          ">é€‰æ‹©ä¸»é¢˜é£æ ¼</h4>
          <div style="display: flex; flex-wrap: wrap; gap: 20px;">
            <div style="
              flex: 1;
              min-width: 200px;
              background-color: rgba(5, 5, 20, 0.9);
              border: 1px solid rgba(10, 255, 255, 0.4);
              border-radius: 10px;
              padding: 20px;
              text-align: center;
              cursor: pointer;
              transition: all 0.4s ease;
              box-shadow: 
                0 0 20px rgba(10, 255, 255, 0.25),
                0 0 40px rgba(255, 10, 150, 0.15);
            " onclick="switchTheme('cyberpunk')">
              <h5 style="
                color: #0ff;
                margin-bottom: 10px;
                text-shadow: 0 0 8px rgba(10, 255, 255, 0.7);
              ">èµ›åšæœ‹å…‹</h5>
              <p style="
                color: rgba(10, 255, 255, 0.8);
                font-size: 0.9rem;
              ">éœ“è™¹æœªæ¥é£æ ¼ï¼Œé»‘è‰²ä¸ºä¸»è‰²è°ƒ</p>
            </div>
            <div style="
              flex: 1;
              min-width: 200px;
              background-color: rgba(5, 5, 20, 0.9);
              border: 1px solid rgba(10, 255, 10, 0.4);
              border-radius: 10px;
              padding: 20px;
              text-align: center;
              cursor: pointer;
              transition: all 0.4s ease;
              box-shadow: 
                0 0 20px rgba(10, 255, 10, 0.25),
                0 0 40px rgba(10, 255, 10, 0.15);
            " onclick="switchTheme('warm')">
              <h5 style="
                color: #0f0;
                margin-bottom: 10px;
                text-shadow: 0 0 8px rgba(10, 255, 10, 0.7);
              ">æ¸©é¦¨</h5>
              <p style="
                color: rgba(10, 255, 10, 0.8);
                font-size: 0.9rem;
              ">æ¸©æš–æŸ”å’Œé£æ ¼ï¼Œç²‰è‰²å’Œç´«è‰²è°ƒ</p>
            </div>
            <div style="
              flex: 1;
              min-width: 200px;
              background-color: rgba(5, 5, 20, 0.9);
              border: 1px solid rgba(255, 255, 255, 0.4);
              border-radius: 10px;
              padding: 20px;
              text-align: center;
              cursor: pointer;
              transition: all 0.4s ease;
              box-shadow: 
                0 0 20px rgba(255, 255, 255, 0.25),
                0 0 40px rgba(255, 255, 255, 0.15);
            " onclick="switchTheme('minimal')">
              <h5 style="
                color: #fff;
                margin-bottom: 10px;
                text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);
              ">æç®€</h5>
              <p style="
                color: rgba(255, 255, 255, 0.8);
                font-size: 0.9rem;
              ">ç®€çº¦å¹²å‡€é£æ ¼ï¼Œç™½è‰²å’Œç°è‰²è°ƒ</p>
            </div>
          </div>
          <div style="
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(5, 5, 20, 0.9);
            border: 1px solid rgba(10, 255, 255, 0.4);
            border-radius: 10px;
            text-align: center;
          ">
            <p style="
              color: rgba(10, 255, 255, 0.8);
              font-size: 0.9rem;
            ">
              å½“å‰ä¸»é¢˜: <span id="current-theme" style="
                color: #f0f;
                font-weight: 600;
                text-shadow: 0 0 8px rgba(255, 10, 150, 0.7);
              ">èµ›åšæœ‹å…‹</span>
            </p>
          </div>
        </div>
      </div>

      <!-- æ•°æ®åŒæ­¥ -->
    <div class="profile-section">
      <h3>æ•°æ®åŒæ­¥</h3>
      <div style="
        background-color: rgba(5, 5, 15, 0.9);
        border: 1px solid rgba(10, 255, 255, 0.4);
        border-radius: 12px;
        padding: 25px;
        box-shadow: 
          0 0 25px rgba(10, 255, 255, 0.25),
          0 0 50px rgba(255, 10, 150, 0.15);
      ">
        <h4 style="
          color: #f0f;
          margin-bottom: 20px;
          text-shadow: 0 0 10px rgba(255, 10, 150, 0.7);
        ">è·¨è®¾å¤‡æ•°æ®åŒæ­¥</h4>
        <p style="
          color: rgba(10, 255, 255, 0.8);
          margin-bottom: 20px;
          line-height: 1.6;
        ">
          ç”±äºæœ¬ç½‘ç«™ä½¿ç”¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼Œä¸åŒè®¾å¤‡é—´çš„æ•°æ®ä¸å…±äº«ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åœ¨è®¾å¤‡é—´åŒæ­¥æ•°æ®ï¼š
        </p>
        <div style="margin-bottom: 20px;">
          <button class="btn btn-primary" onclick="exportData()" style="margin-right: 10px;">å¯¼å‡ºæ•°æ®</button>
          <label class="btn btn-secondary" for="import-file" style="cursor: pointer;">
            å¯¼å…¥æ•°æ®
            <input type="file" id="import-file" accept=".json" onchange="importData(event)" style="display: none;">
          </label>
        </div>
        <div style="
          background-color: rgba(5, 5, 20, 0.9);
          border: 1px solid rgba(10, 255, 255, 0.3);
          border-radius: 8px;
          padding: 15px;
          margin-top: 20px;
        ">
          <h5 style="
            color: #0ff;
            margin-bottom: 10px;
            font-size: 1rem;
          ">ä½¿ç”¨è¯´æ˜ï¼š</h5>
          <ul style="
            color: rgba(10, 255, 255, 0.7);
            list-style-position: inside;
            line-height: 1.6;
          ">
            <li>åœ¨ä¸»è®¾å¤‡ä¸Šç‚¹å‡»"å¯¼å‡ºæ•°æ®"ï¼Œä¸‹è½½JSONæ–‡ä»¶</li>
            <li>åœ¨å…¶ä»–è®¾å¤‡ä¸Šç™»å½•ç½‘ç«™ï¼Œç‚¹å‡»"å¯¼å…¥æ•°æ®"ï¼Œé€‰æ‹©ä¸‹è½½çš„JSONæ–‡ä»¶</li>
            <li>å¯¼å…¥å®Œæˆåï¼Œé¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œæ˜¾ç¤ºåŒæ­¥çš„æ•°æ®</li>
            <li>å»ºè®®å®šæœŸå¯¼å‡ºæ•°æ®å¤‡ä»½ï¼Œä»¥é˜²æ•°æ®ä¸¢å¤±</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ä¸ªäººè®¾ç½® -->
    <div class="profile-section">
      <h3>ä¸ªäººè®¾ç½®</h3>
      <form id="profile-form">
        <div class="form-group">
          <label for="new-password">ä¿®æ”¹å¯†ç </label>
          <input type="password" id="new-password" placeholder="è¾“å…¥æ–°å¯†ç ">
        </div>
        <div class="form-group">
          <label for="confirm-password">ç¡®è®¤å¯†ç </label>
          <input type="password" id="confirm-password" placeholder="ç¡®è®¤æ–°å¯†ç ">
        </div>
        <div class="success-message" id="password-success" style="display: none;">å¯†ç ä¿®æ”¹æˆåŠŸï¼</div>
        <div class="error-message" id="password-error" style="display: none;"></div>
        <button type="submit" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
      </form>
    </div>
    </div>
  </div>

  <script>
    // å…¨å±€å˜é‡
    let currentUser = null;
    let currentImageId = null;

    // å›ºå®šçš„æƒ…ä¾£è´¦å·
    const validUsers = [
      { username: 'boyfriend', password: 'love123', email: 'boyfriend@qq.com' },
      { username: 'girlfriend', password: 'love123', email: 'girlfriend@qq.com' }
    ];

    // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç™»å½•çŠ¶æ€
    document.addEventListener('DOMContentLoaded', function() {
      checkLoginStatus();
      setupEventListeners();
    });

    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    function checkLoginStatus() {
      const storedUser = localStorage.getItem('couple-username');
      if (storedUser) {
        currentUser = storedUser;
        showHomePage();
      } else {
        showLoginPage();
      }
    }

    // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
    function setupEventListeners() {
      // ç™»å½•è¡¨å•
      const loginForm = document.getElementById('login-form');
      if (loginForm) {
        loginForm.addEventListener('submit', handleLogin);
      }

      // æ³¨å†Œè¡¨å•
      const registerForm = document.getElementById('register-form');
      if (registerForm) {
        registerForm.addEventListener('submit', handleRegister);
      }

      // ä¸ªäººä¸­å¿ƒè¡¨å•
      const profileForm = document.getElementById('profile-form');
      if (profileForm) {
        profileForm.addEventListener('submit', handleProfileSubmit);
      }

      // ä¸ªäººä¿¡æ¯ç¼–è¾‘è¡¨å•
      const profileEditForm = document.getElementById('profile-edit-form');
      if (profileEditForm) {
        profileEditForm.addEventListener('submit', handleProfileEditSubmit);
      }

      // ä¸Šä¼ è¡¨å•
      const uploadForm = document.getElementById('upload-form');
      if (uploadForm) {
        uploadForm.addEventListener('submit', handleUpload);
      }

      // å›¾ç‰‡æ¥æºåˆ‡æ¢
      const imageSourceRadios = document.querySelectorAll('input[name="image-source"]');
      imageSourceRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === 'url') {
            document.getElementById('url-input').style.display = 'block';
            document.getElementById('file-input').style.display = 'none';
          } else {
            document.getElementById('url-input').style.display = 'none';
            document.getElementById('file-input').style.display = 'block';
          }
        });
      });

      // æ–‡ä»¶ä¸Šä¼ 
      const fileInput = document.getElementById('image-files');
      if (fileInput) {
        fileInput.addEventListener('change', handleFileChange);
      }

      // æ‹–æ‹½ä¸Šä¼ 
      const fileDropArea = document.getElementById('file-drop-area');
      if (fileDropArea) {
        fileDropArea.addEventListener('dragover', handleDragOver);
        fileDropArea.addEventListener('dragleave', handleDragLeave);
        fileDropArea.addEventListener('drop', handleDrop);
      }
    }

    // æ˜¾ç¤ºç™»å½•è¡¨å•
    function showLoginForm() {
      document.getElementById('login-form').style.display = 'block';
      document.getElementById('register-form').style.display = 'none';
      document.getElementById('login-tab').style.borderBottom = '3px solid #0ff';
      document.getElementById('login-tab').style.color = '#0ff';
      document.getElementById('login-tab').style.textShadow = '0 0 8px rgba(10, 255, 255, 0.7)';
      document.getElementById('register-tab').style.borderBottom = '3px solid transparent';
      document.getElementById('register-tab').style.color = 'rgba(10, 255, 255, 0.6)';
      document.getElementById('register-tab').style.textShadow = 'none';
    }

    // æ˜¾ç¤ºæ³¨å†Œè¡¨å•
    function showRegisterForm() {
      document.getElementById('login-form').style.display = 'none';
      document.getElementById('register-form').style.display = 'block';
      document.getElementById('register-tab').style.borderBottom = '3px solid #0ff';
      document.getElementById('register-tab').style.color = '#0ff';
      document.getElementById('register-tab').style.textShadow = '0 0 8px rgba(10, 255, 255, 0.7)';
      document.getElementById('login-tab').style.borderBottom = '3px solid transparent';
      document.getElementById('login-tab').style.color = 'rgba(10, 255, 255, 0.6)';
      document.getElementById('login-tab').style.textShadow = 'none';
    }

    // å¤„ç†ç™»å½•
    function handleLogin(e) {
      e.preventDefault();
      const username = document.getElementById('login-username').value;
      const password = document.getElementById('login-password').value;
      const errorElement = document.getElementById('login-error');

      // éªŒè¯ç”¨æˆ·åå’Œå¯†ç 
      const user = validUsers.find(
        (user) => (user.username === username || user.email === username) && user.password === password
      );

      if (user) {
        currentUser = user.username;
        localStorage.setItem('couple-username', user.username);
        // æ›´æ–°æœ€åç™»å½•æ—¶é—´
        localStorage.setItem(`user-${user.username}-last-login`, new Date().toISOString());
        showHomePage();
      } else {
        errorElement.textContent = 'ç”¨æˆ·å/é‚®ç®±æˆ–å¯†ç é”™è¯¯';
      }
    }

    // å¤„ç†æ³¨å†Œ
    function handleRegister(e) {
      e.preventDefault();
      const username = document.getElementById('register-username').value;
      const email = document.getElementById('register-email').value;
      const password = document.getElementById('register-password').value;
      const confirmPassword = document.getElementById('register-confirm-password').value;
      const errorElement = document.getElementById('register-error');
      const successElement = document.getElementById('register-success');

      // é‡ç½®æ¶ˆæ¯
      errorElement.textContent = '';
      successElement.style.display = 'none';

      // éªŒè¯ç”¨æˆ·å
      if (username.length < 3) {
        errorElement.textContent = 'ç”¨æˆ·åé•¿åº¦è‡³å°‘ä¸º3ä½';
        return;
      }

      // éªŒè¯é‚®ç®±
      const qqEmailRegex = /^[a-zA-Z0-9._%+-]+@qq\.com$/;
      if (!qqEmailRegex.test(email)) {
        errorElement.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„QQé‚®ç®±';
        return;
      }

      // éªŒè¯å¯†ç 
      if (password.length < 6) {
        errorElement.textContent = 'å¯†ç é•¿åº¦è‡³å°‘ä¸º6ä½';
        return;
      }

      if (password !== confirmPassword) {
        errorElement.textContent = 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´';
        return;
      }

      // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
      if (validUsers.some(user => user.username === username)) {
        errorElement.textContent = 'ç”¨æˆ·åå·²å­˜åœ¨';
        return;
      }

      // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
      if (validUsers.some(user => user.email === email)) {
        errorElement.textContent = 'é‚®ç®±å·²è¢«æ³¨å†Œ';
        return;
      }

      // æ·»åŠ æ–°ç”¨æˆ·
      const newUser = { username, email, password };
      validUsers.push(newUser);
      
      // ä¿å­˜ç”¨æˆ·ä¿¡æ¯
      localStorage.setItem(`user-${username}-email`, email);
      localStorage.setItem(`user-${username}-password`, password);
      localStorage.setItem(`user-${username}-joined`, new Date().toISOString());

      // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      successElement.style.display = 'block';
      
      // é‡ç½®è¡¨å•
      document.getElementById('register-form').reset();
      
      // 3ç§’ååˆ‡æ¢åˆ°ç™»å½•è¡¨å•
      setTimeout(() => {
        showLoginForm();
        successElement.style.display = 'none';
      }, 3000);
    }

    // å¤„ç†ä¸ªäººä¿¡æ¯ç¼–è¾‘æäº¤
    function handleProfileEditSubmit(e) {
      e.preventDefault();
      const username = document.getElementById('edit-username').value;
      const email = document.getElementById('edit-email').value;
      const successElement = document.getElementById('profile-update-success');
      const errorElement = document.getElementById('profile-update-error');

      // é‡ç½®æ¶ˆæ¯
      successElement.style.display = 'none';
      errorElement.style.display = 'none';

      // éªŒè¯ç”¨æˆ·å
      if (username.length < 3) {
        errorElement.textContent = 'ç”¨æˆ·åé•¿åº¦è‡³å°‘ä¸º3ä½';
        errorElement.style.display = 'block';
        return;
      }

      // éªŒè¯é‚®ç®±
      const qqEmailRegex = /^[a-zA-Z0-9._%+-]+@qq\.com$/;
      if (!qqEmailRegex.test(email)) {
        errorElement.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„QQé‚®ç®±';
        errorElement.style.display = 'block';
        return;
      }

      // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
      if (validUsers.some(user => user.username === username && user.username !== currentUser)) {
        errorElement.textContent = 'ç”¨æˆ·åå·²å­˜åœ¨';
        errorElement.style.display = 'block';
        return;
      }

      // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
      if (validUsers.some(user => user.email === email && user.username !== currentUser)) {
        errorElement.textContent = 'é‚®ç®±å·²è¢«æ³¨å†Œ';
        errorElement.style.display = 'block';
        return;
      }

      // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
      const userIndex = validUsers.findIndex(user => user.username === currentUser);
      if (userIndex !== -1) {
        validUsers[userIndex].username = username;
        validUsers[userIndex].email = email;
      }

      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
      localStorage.setItem(`user-${currentUser}-email`, email);
      
      // å¦‚æœç”¨æˆ·åæ”¹å˜ï¼Œæ›´æ–°æœ¬åœ°å­˜å‚¨é”®
      if (username !== currentUser) {
        // å¤åˆ¶æ•°æ®åˆ°æ–°é”®
        const joinedDate = localStorage.getItem(`user-${currentUser}-joined`);
        const lastLogin = localStorage.getItem(`user-${currentUser}-last-login`);
        const password = localStorage.getItem(`user-${currentUser}-password`);
        
        if (joinedDate) localStorage.setItem(`user-${username}-joined`, joinedDate);
        if (lastLogin) localStorage.setItem(`user-${username}-last-login`, lastLogin);
        if (password) localStorage.setItem(`user-${username}-password`, password);
        localStorage.setItem(`user-${username}-email`, email);
        
        // åˆ é™¤æ—§é”®
        localStorage.removeItem(`user-${currentUser}-joined`);
        localStorage.removeItem(`user-${currentUser}-last-login`);
        localStorage.removeItem(`user-${currentUser}-password`);
        localStorage.removeItem(`user-${currentUser}-email`);
        
        // æ›´æ–°å½“å‰ç”¨æˆ·
        currentUser = username;
        localStorage.setItem('couple-username', username);
      }

      // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      successElement.style.display = 'block';
      
      // åˆ‡æ¢å›æŸ¥çœ‹æ¨¡å¼
      setTimeout(() => {
        toggleEditProfile();
        loadProfileInfo();
      }, 1500);
    }

    // åˆ‡æ¢ç¼–è¾‘ä¸ªäººèµ„æ–™æ¨¡å¼
    function toggleEditProfile() {
      const profileView = document.getElementById('profile-view');
      const profileEdit = document.getElementById('profile-edit');
      const editButton = document.getElementById('edit-profile-btn');

      if (profileView.style.display !== 'none') {
        // åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼
        profileView.style.display = 'none';
        profileEdit.style.display = 'block';
        editButton.textContent = 'å–æ¶ˆç¼–è¾‘';
        
        // å¡«å……è¡¨å•æ•°æ®
        document.getElementById('edit-username').value = currentUser;
        document.getElementById('edit-email').value = localStorage.getItem(`user-${currentUser}-email`) || '';
      } else {
        // åˆ‡æ¢åˆ°æŸ¥çœ‹æ¨¡å¼
        profileView.style.display = 'block';
        profileEdit.style.display = 'none';
        editButton.textContent = 'ç¼–è¾‘èµ„æ–™';
        
        // é‡ç½®æ¶ˆæ¯
        document.getElementById('profile-update-success').style.display = 'none';
        document.getElementById('profile-update-error').style.display = 'none';
      }
    }

    // å¤„ç†ä¸ªäººä¸­å¿ƒè¡¨å•æäº¤
    function handleProfileSubmit(e) {
      e.preventDefault();
      const newPassword = document.getElementById('new-password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      const passwordSuccess = document.getElementById('password-success');
      const passwordError = document.getElementById('password-error');

      // é‡ç½®æ¶ˆæ¯
      passwordSuccess.style.display = 'none';
      passwordError.style.display = 'none';

      // éªŒè¯å¯†ç 
      if (newPassword) {
        if (newPassword !== confirmPassword) {
          passwordError.textContent = 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´';
          passwordError.style.display = 'block';
          return;
        }

        if (newPassword.length < 6) {
          passwordError.textContent = 'å¯†ç é•¿åº¦è‡³å°‘ä¸º6ä½';
          passwordError.style.display = 'block';
          return;
        }

        // ä¿®æ”¹å¯†ç 
        changePassword(newPassword);
        passwordSuccess.style.display = 'block';

        // é‡ç½®è¡¨å•
        document.getElementById('profile-form').reset();

        // 3ç§’åéšè—æˆåŠŸæ¶ˆæ¯
        setTimeout(() => {
          passwordSuccess.style.display = 'none';
        }, 3000);
      }
    }

    // å¤„ç†æ–‡ä»¶é€‰æ‹©
    function handleFileChange(e) {
      const files = e.target.files;
      if (files.length > 0) {
        showFilePreviews(files);
      }
    }

    // å¤„ç†æ‹–æ‹½
    function handleDragOver(e) {
      e.preventDefault();
      document.getElementById('file-drop-area').classList.add('drag-over');
    }

    function handleDragLeave(e) {
      e.preventDefault();
      document.getElementById('file-drop-area').classList.remove('drag-over');
    }

    function handleDrop(e) {
      e.preventDefault();
      document.getElementById('file-drop-area').classList.remove('drag-over');
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        showFilePreviews(files);
      }
    }

    // æ˜¾ç¤ºæ–‡ä»¶é¢„è§ˆ
    function showFilePreviews(files) {
      const previewGrid = document.getElementById('preview-grid');
      previewGrid.innerHTML = '';

      for (let i = 0; i < files.length; i++) {
        if (files[i].type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(event) {
            const previewItem = document.createElement('div');
            previewItem.className = 'preview-item';
            previewItem.innerHTML = `<img src="${event.target.result}" alt="é¢„è§ˆ">`;
            previewGrid.appendChild(previewItem);
          };
          reader.readAsDataURL(files[i]);
        }
      }
    }

    // å¤„ç†ä¸Šä¼ 
    function handleUpload(e) {
      e.preventDefault();
      const description = document.getElementById('description').value;
      const tags = document.getElementById('tags').value;
      const imageSource = document.querySelector('input[name="image-source"]:checked').value;
      const uploadProgress = document.getElementById('upload-progress');
      const progressFill = document.querySelector('.progress-fill');
      const progressPercent = document.getElementById('progress-percent');

      if (!description) {
        alert('è¯·æ·»åŠ å›¾ç‰‡æè¿°');
        return;
      }

      // å¤„ç†æ ‡ç­¾
      const processedTags = tags
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag.length > 0);

      if (imageSource === 'url') {
        const imageUrl = document.getElementById('image-url').value;
        if (!imageUrl) {
          alert('è¯·è¾“å…¥å›¾ç‰‡URL');
          return;
        }

        // æ¨¡æ‹Ÿä¸Šä¼ è¿›åº¦
        uploadProgress.style.display = 'block';
        let progress = 0;
        const interval = setInterval(() => {
          progress += 10;
          progressFill.style.width = `${progress}%`;
          progressPercent.textContent = progress;
          if (progress >= 100) {
            clearInterval(interval);
            setTimeout(() => {
              saveImage(imageUrl, description, processedTags);
            }, 500);
          }
        }, 200);
      } else {
        const files = document.getElementById('image-files').files;
        if (files.length === 0) {
          alert('è¯·é€‰æ‹©æœ¬åœ°å›¾ç‰‡');
          return;
        }

        // æ¨¡æ‹Ÿä¸Šä¼ è¿›åº¦
        uploadProgress.style.display = 'block';
        let progress = 0;
        const interval = setInterval(() => {
          progress += 10;
          progressFill.style.width = `${progress}%`;
          progressPercent.textContent = progress;
          if (progress >= 100) {
            clearInterval(interval);
            setTimeout(() => {
              saveLocalImages(files, description, processedTags);
            }, 500);
          }
        }, 200);
      }
    }

    // ä¿å­˜ç½‘ç»œå›¾ç‰‡
    function saveImage(url, description, tags) {
      const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
      const newImage = {
        id: Date.now(),
        url: url,
        description: description,
        tags: tags,
        uploader: currentUser,
        uploadedAt: new Date().toISOString()
      };

      storedImages.push(newImage);
      localStorage.setItem('couple-images', JSON.stringify(storedImages));

      // æ›´æ–°æ ‡ç­¾åˆ—è¡¨
      updateTagList(tags);

      // é‡ç½®è¡¨å•
      document.getElementById('upload-form').reset();
      document.getElementById('preview-grid').innerHTML = '';
      document.getElementById('upload-progress').style.display = 'none';

      alert('å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼');
      showHomePage();
    }

    // ä¿å­˜æœ¬åœ°å›¾ç‰‡
    function saveLocalImages(files, description, tags) {
      const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
      const newImages = [];

      for (let i = 0; i < files.length; i++) {
        if (files[i].type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(event) {
            const newImage = {
              id: Date.now() + i,
              url: event.target.result,
              description: description,
              tags: tags,
              uploader: currentUser,
              uploadedAt: new Date().toISOString()
            };
            newImages.push(newImage);

            if (newImages.length === files.length) {
              storedImages.push(...newImages);
              localStorage.setItem('couple-images', JSON.stringify(storedImages));

              // æ›´æ–°æ ‡ç­¾åˆ—è¡¨
              updateTagList(tags);

              // é‡ç½®è¡¨å•
              document.getElementById('upload-form').reset();
              document.getElementById('preview-grid').innerHTML = '';
              document.getElementById('upload-progress').style.display = 'none';

              alert('å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼');
              showHomePage();
            }
          };
          reader.readAsDataURL(files[i]);
        }
      }
    }

    // æ›´æ–°æ ‡ç­¾åˆ—è¡¨
    function updateTagList(newTags) {
      const existingTags = JSON.parse(localStorage.getItem('couple-tags') || '[]');
      const allTags = [...new Set([...existingTags, ...newTags])];
      localStorage.setItem('couple-tags', JSON.stringify(allTags));
    }

    // è·å–æ‰€æœ‰æ ‡ç­¾
    function getAllTags() {
      return JSON.parse(localStorage.getItem('couple-tags') || '[]');
    }

    // åŠ è½½æ ‡ç­¾åˆ°ç­›é€‰ä¸‹æ‹‰æ¡†
    function loadTagsToFilter() {
      const tagFilter = document.getElementById('tag-filter');
      if (tagFilter) {
        const tags = getAllTags();
        // æ¸…ç©ºç°æœ‰é€‰é¡¹ï¼ˆä¿ç•™"æ‰€æœ‰æ ‡ç­¾"ï¼‰
        while (tagFilter.options.length > 1) {
          tagFilter.remove(1);
        }
        // æ·»åŠ æ ‡ç­¾é€‰é¡¹
        tags.forEach(tag => {
          const option = document.createElement('option');
          option.value = tag;
          option.textContent = tag;
          tagFilter.appendChild(option);
        });
      }
    }

    // æ‰§è¡Œæœç´¢
    function performSearch() {
      const searchInput = document.getElementById('search-input').value.toLowerCase();
      const tagFilter = document.getElementById('tag-filter').value;
      const searchResults = document.getElementById('search-results');
      
      // åŠ è½½æ‰€æœ‰å›¾ç‰‡
      const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
      
      // æ‰§è¡Œæœç´¢å’Œç­›é€‰
      let filteredImages = storedImages;
      
      // æŒ‰æ ‡ç­¾ç­›é€‰
      if (tagFilter) {
        filteredImages = filteredImages.filter(image => 
          image.tags && image.tags.includes(tagFilter)
        );
      }
      
      // æŒ‰æœç´¢è¯ç­›é€‰
      if (searchInput) {
        filteredImages = filteredImages.filter(image => 
          image.description.toLowerCase().includes(searchInput) ||
          (image.tags && image.tags.some(tag => tag.toLowerCase().includes(searchInput)))
        );
      }
      
      // æ›´æ–°æœç´¢ç»“æœç»Ÿè®¡
      if (searchResults) {
        if (tagFilter && searchInput) {
          searchResults.textContent = `æœç´¢ç»“æœ: åŒ…å«æ ‡ç­¾"${tagFilter}"ä¸”åŒ¹é…"${searchInput}"çš„å›¾ç‰‡ (${filteredImages.length} å¼ )`;
        } else if (tagFilter) {
          searchResults.textContent = `æœç´¢ç»“æœ: åŒ…å«æ ‡ç­¾"${tagFilter}"çš„å›¾ç‰‡ (${filteredImages.length} å¼ )`;
        } else if (searchInput) {
          searchResults.textContent = `æœç´¢ç»“æœ: åŒ¹é…"${searchInput}"çš„å›¾ç‰‡ (${filteredImages.length} å¼ )`;
        } else {
          searchResults.textContent = `æ˜¾ç¤ºæ‰€æœ‰å›¾ç‰‡ (${filteredImages.length} å¼ )`;
        }
      }
      
      // æ¸²æŸ“ç­›é€‰åçš„å›¾ç‰‡
      const emptyState = document.getElementById('empty-state');
      const imageGrid = document.getElementById('image-grid');
      const loading = document.getElementById('loading');
      
      loading.style.display = 'none';
      
      if (filteredImages.length === 0) {
        emptyState.style.display = 'block';
        imageGrid.innerHTML = '';
      } else {
        emptyState.style.display = 'none';
        imageGrid.innerHTML = '';
        
        // æŒ‰æ—¶é—´å€’åºæ’åˆ—
        filteredImages.sort((a, b) => new Date(b.uploadedAt) - new Date(a.uploadedAt));
        
        filteredImages.forEach(image => {
          const imageCard = document.createElement('div');
          imageCard.className = 'image-card';
          
          // ç”Ÿæˆæ ‡ç­¾HTML
          const tagsHTML = image.tags && image.tags.length > 0 
            ? `
              <div class="image-tags" style="margin: 10px 0;">
                ${image.tags.map(tag => `
                  <span style="
                    display: inline-block;
                    padding: 4px 12px;
                    margin: 0 4px 4px 0;
                    background-color: rgba(255, 10, 150, 0.2);
                    color: #f0f;
                    border: 1px solid rgba(255, 10, 150, 0.4);
                    border-radius: 15px;
                    font-size: 0.85rem;
                    font-weight: 500;
                    box-shadow: 0 0 8px rgba(255, 10, 150, 0.3);
                  ">${tag}</span>
                `).join('')}
              </div>
            `
            : '';
          
          imageCard.innerHTML = `
            <div class="image-thumbnail">
              <img src="${image.url}" alt="${image.description}">
            </div>
            <div class="image-info">
              <h3>${image.description}</h3>
              ${tagsHTML}
              <div class="image-meta">
                <span>ä¸Šä¼ è€…: ${image.uploader}</span>
                <span>${formatDate(image.uploadedAt)}</span>
              </div>
            </div>
          `;
          imageCard.addEventListener('click', () => showImageDetail(image.id));
          imageGrid.appendChild(imageCard);
        });
      }
    }

    // åŠ è½½å›¾ç‰‡åˆ—è¡¨
    function loadImages() {
      const loading = document.getElementById('loading');
      const emptyState = document.getElementById('empty-state');
      const imageGrid = document.getElementById('image-grid');

      // æ¨¡æ‹ŸåŠ è½½å»¶è¿Ÿ
      setTimeout(() => {
        const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
        
        // ç›´æ¥æ¸²æŸ“å­˜å‚¨çš„å›¾ç‰‡ï¼Œä¸å†è‡ªåŠ¨åˆå§‹åŒ–ç¤ºä¾‹å›¾ç‰‡
        renderImages(storedImages);

        // åŠ è½½æ ‡ç­¾åˆ°ç­›é€‰ä¸‹æ‹‰æ¡†
        loadTagsToFilter();
        
        loading.style.display = 'none';
      }, 500);
    }

    // æ¸²æŸ“å›¾ç‰‡åˆ—è¡¨
    function renderImages(images) {
      const emptyState = document.getElementById('empty-state');
      const imageGrid = document.getElementById('image-grid');

      if (images.length === 0) {
        emptyState.style.display = 'block';
        imageGrid.innerHTML = '';
      } else {
        emptyState.style.display = 'none';
        imageGrid.innerHTML = '';

        // æŒ‰æ—¶é—´å€’åºæ’åˆ—
        images.sort((a, b) => new Date(b.uploadedAt) - new Date(a.uploadedAt));

        images.forEach(image => {
          const imageCard = document.createElement('div');
          imageCard.className = 'image-card';
          
          // ç”Ÿæˆæ ‡ç­¾HTML
          const tagsHTML = image.tags && image.tags.length > 0 
            ? `
              <div class="image-tags" style="margin: 10px 0;">
                ${image.tags.map(tag => `
                  <span style="
                    display: inline-block;
                    padding: 4px 12px;
                    margin: 0 4px 4px 0;
                    background-color: rgba(255, 10, 150, 0.2);
                    color: #f0f;
                    border: 1px solid rgba(255, 10, 150, 0.4);
                    border-radius: 15px;
                    font-size: 0.85rem;
                    font-weight: 500;
                    box-shadow: 0 0 8px rgba(255, 10, 150, 0.3);
                  ">${tag}</span>
                `).join('')}
              </div>
            `
            : '';
          
          imageCard.innerHTML = `
            <div class="image-thumbnail">
              <img src="${image.url}" alt="${image.description}">
            </div>
            <div class="image-info">
              <h3>${image.description}</h3>
              ${tagsHTML}
              <div class="image-meta">
                <span>ä¸Šä¼ è€…: ${image.uploader}</span>
                <span>${formatDate(image.uploadedAt)}</span>
              </div>
            </div>
          `;
          imageCard.addEventListener('click', () => showImageDetail(image.id));
          imageGrid.appendChild(imageCard);
        });
      }
    }

    // æ˜¾ç¤ºå›¾ç‰‡è¯¦æƒ…
    function showImageDetail(imageId) {
      currentImageId = imageId;
      const detailLoading = document.getElementById('detail-loading');
      const detailContent = document.getElementById('detail-content');
      const detailImage = document.getElementById('detail-image');
      const detailDescription = document.getElementById('detail-description');
      const detailUploader = document.getElementById('detail-uploader');
      const detailTime = document.getElementById('detail-time');
      const detailWelcomeText = document.getElementById('detail-welcome-text');

      // æ¨¡æ‹ŸåŠ è½½å»¶è¿Ÿ
      setTimeout(() => {
        const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
        // æŒ‰æ—¶é—´å€’åºæ’åˆ—
        storedImages.sort((a, b) => new Date(b.uploadedAt) - new Date(a.uploadedAt));
        const image = storedImages.find(img => img.id === imageId);

        if (image) {
          // ç”Ÿæˆæ ‡ç­¾HTML
          const tagsHTML = image.tags && image.tags.length > 0 
            ? `
              <div style="margin: 20px 0;">
                <strong style="color: #f0f;">æ ‡ç­¾:</strong>
                <div style="margin-top: 10px;">
                  ${image.tags.map(tag => `
                    <span style="
                      display: inline-block;
                      padding: 6px 16px;
                      margin: 0 6px 6px 0;
                      background-color: rgba(255, 10, 150, 0.2);
                      color: #f0f;
                      border: 1px solid rgba(255, 10, 150, 0.4);
                      border-radius: 20px;
                      font-size: 0.9rem;
                      font-weight: 500;
                      box-shadow: 0 0 10px rgba(255, 10, 150, 0.4);
                    ">${tag}</span>
                  `).join('')}
                </div>
              </div>
            `
            : '';

          detailImage.src = image.url;
          detailImage.alt = image.description;
          detailDescription.textContent = image.description;
          detailUploader.textContent = image.uploader;
          detailTime.textContent = formatDate(image.uploadedAt);
          detailWelcomeText.textContent = `æ¬¢è¿ï¼Œ${currentUser}`;

          // æ·»åŠ æ ‡ç­¾åˆ°è¯¦æƒ…é¡µé¢
          const detailMeta = document.querySelector('.detail-meta');
          if (detailMeta) {
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨æ ‡ç­¾å®¹å™¨
            const existingTagsContainer = detailMeta.querySelector('.tags-container');
            if (existingTagsContainer) {
              existingTagsContainer.innerHTML = tagsHTML;
            } else {
              const tagsContainer = document.createElement('div');
              tagsContainer.className = 'tags-container';
              tagsContainer.innerHTML = tagsHTML;
              detailMeta.appendChild(tagsContainer);
            }
          }

          // æ·»åŠ äº’åŠ¨åŠŸèƒ½
          addInteractionFeatures(image.id);

          // æ›´æ–°å¯¼èˆªæ§åˆ¶
          updateNavigationControls(storedImages, imageId);

          detailLoading.style.display = 'none';
          detailContent.style.display = 'block';

          // æ˜¾ç¤ºè¯¦æƒ…é¡µé¢
          hideAllPages();
          document.getElementById('image-detail-page').style.display = 'block';
        } else {
          alert('å›¾ç‰‡ä¸å­˜åœ¨');
          showHomePage();
        }
      }, 300);
    }

    // åˆ é™¤å›¾ç‰‡
    function deleteImage() {
      if (confirm('ç¡®å®šè¦åˆ é™¤è¿™å¼ å›¾ç‰‡å—ï¼Ÿ')) {
        const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
        const updatedImages = storedImages.filter(img => img.id !== currentImageId);
        localStorage.setItem('couple-images', JSON.stringify(updatedImages));
        alert('å›¾ç‰‡åˆ é™¤æˆåŠŸï¼');
        // ä½¿ç”¨ location.reload() ç¡®ä¿å®Œå…¨åˆ·æ–°é¡µé¢ï¼Œé¿å…ç¼“å­˜é—®é¢˜
        location.reload();
      }
    }

    // åˆ‡æ¢å…¨å±
    function toggleFullscreen(element) {
      if (!document.fullscreenElement) {
        if (element.requestFullscreen) {
          element.requestFullscreen();
        } else if (element.mozRequestFullScreen) {
          element.mozRequestFullScreen();
        } else if (element.webkitRequestFullscreen) {
          element.webkitRequestFullscreen();
        } else if (element.msRequestFullscreen) {
          element.msRequestFullscreen();
        }
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.mozCancelFullScreen) {
          document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
          document.msExitFullscreen();
        }
      }
    }

    // æ›´æ–°å¯¼èˆªæ§åˆ¶
    function updateNavigationControls(images, currentId) {
      const currentIndex = images.findIndex(img => img.id === currentId);
      const totalImages = images.length;
      
      // æ›´æ–°å›¾ç‰‡è®¡æ•°å™¨
      document.getElementById('image-counter').textContent = `${currentIndex + 1}/${totalImages}`;
      
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      
      prevBtn.disabled = currentIndex === 0;
      nextBtn.disabled = currentIndex === totalImages - 1;
      
      if (prevBtn.disabled) {
        prevBtn.style.opacity = '0.5';
        prevBtn.style.cursor = 'not-allowed';
      } else {
        prevBtn.style.opacity = '1';
        prevBtn.style.cursor = 'pointer';
      }
      
      if (nextBtn.disabled) {
        nextBtn.style.opacity = '0.5';
        nextBtn.style.cursor = 'not-allowed';
      } else {
        nextBtn.style.opacity = '1';
        nextBtn.style.cursor = 'pointer';
      }
    }

    // å¯¼èˆªå›¾ç‰‡
    function navigateImage(direction) {
      const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
      // æŒ‰æ—¶é—´å€’åºæ’åˆ—
      storedImages.sort((a, b) => new Date(b.uploadedAt) - new Date(a.uploadedAt));
      
      const currentIndex = storedImages.findIndex(img => img.id === currentImageId);
      let newIndex;
      
      if (direction === 'prev') {
        newIndex = currentIndex - 1;
        if (newIndex < 0) return;
      } else {
        newIndex = currentIndex + 1;
        if (newIndex >= storedImages.length) return;
      }
      
      showImageDetail(storedImages[newIndex].id);
    }

    // æ ¼å¼åŒ–æ—¥æœŸ
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleString('zh-CN', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    // æ˜¾ç¤ºç™»å½•é¡µé¢
    function showLoginPage() {
      hideAllPages();
      document.getElementById('login-page').style.display = 'block';
    }

    // æ˜¾ç¤ºé¦–é¡µ
    function showHomePage() {
      hideAllPages();
      document.getElementById('home-page').style.display = 'block';
      document.getElementById('welcome-text').textContent = `æ¬¢è¿ï¼Œ${currentUser}`;
      loadImages();
    }

    // æ˜¾ç¤ºä¸Šä¼ é¡µé¢
    function showUploadPage() {
      hideAllPages();
      document.getElementById('upload-page').style.display = 'block';
      document.getElementById('upload-welcome-text').textContent = `æ¬¢è¿ï¼Œ${currentUser}`;
    }

    // éšè—æ‰€æœ‰é¡µé¢
    function hideAllPages() {
      document.getElementById('login-page').style.display = 'none';
      document.getElementById('home-page').style.display = 'none';
      document.getElementById('upload-page').style.display = 'none';
      document.getElementById('image-detail-page').style.display = 'none';
      document.getElementById('profile-page').style.display = 'none';
    }

    // æ˜¾ç¤ºä¸ªäººä¸­å¿ƒé¡µé¢
    function showProfilePage() {
      hideAllPages();
      document.getElementById('profile-page').style.display = 'block';
      document.getElementById('profile-welcome-text').textContent = `æ¬¢è¿ï¼Œ${currentUser}`;
      loadProfileInfo();
    }

    // åŠ è½½ä¸ªäººä¿¡æ¯
    function loadProfileInfo() {
      // æ˜¾ç¤ºç”¨æˆ·å
      document.getElementById('profile-username').textContent = currentUser;
      
      // æ˜¾ç¤ºé‚®ç®±
      const userEmail = localStorage.getItem(`user-${currentUser}-email`);
      document.getElementById('profile-email').textContent = userEmail || '';
      
      // æ˜¾ç¤ºæ³¨å†Œæ—¶é—´
      const joinedDate = localStorage.getItem(`user-${currentUser}-joined`);
      if (joinedDate) {
        document.getElementById('profile-joined-date').textContent = formatDate(joinedDate);
      } else {
        const now = new Date().toISOString();
        localStorage.setItem(`user-${currentUser}-joined`, now);
        document.getElementById('profile-joined-date').textContent = formatDate(now);
      }
      
      // æ˜¾ç¤ºæœ€åç™»å½•æ—¶é—´
      const lastLogin = localStorage.getItem(`user-${currentUser}-last-login`);
      if (lastLogin) {
        document.getElementById('profile-last-login').textContent = formatDate(lastLogin);
      } else {
        const now = new Date().toISOString();
        localStorage.setItem(`user-${currentUser}-last-login`, now);
        document.getElementById('profile-last-login').textContent = formatDate(now);
      }
      
      // è®¡ç®—ä¸Šä¼ ç»Ÿè®¡
      calculateUploadStats();
      
      // æ˜¾ç¤ºæœ€è¿‘ä¸Šä¼ 
      showRecentUploads();
      
      // åŠ è½½çºªå¿µæ—¥
      loadAnniversaries();
    }

    // è®¡ç®—ä¸Šä¼ ç»Ÿè®¡
    function calculateUploadStats() {
      const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
      const userImages = storedImages.filter(img => img.uploader === currentUser);
      
      // æ€»ä¸Šä¼ æ•°
      document.getElementById('total-uploads').textContent = userImages.length;
      
      // æœ€è¿‘ä¸Šä¼ æ•°ï¼ˆ7å¤©å†…ï¼‰
      const sevenDaysAgo = new Date();
      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
      const recentImages = userImages.filter(img => new Date(img.uploadedAt) >= sevenDaysAgo);
      document.getElementById('recent-uploads').textContent = recentImages.length;
    }

    // æ˜¾ç¤ºæœ€è¿‘ä¸Šä¼ 
    function showRecentUploads() {
      const storedImages = JSON.parse(localStorage.getItem('couple-images') || '[]');
      const userImages = storedImages.filter(img => img.uploader === currentUser);
      
      // æŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼Œå–æœ€è¿‘5å¼ 
      userImages.sort((a, b) => new Date(b.uploadedAt) - new Date(a.uploadedAt));
      const recentImages = userImages.slice(0, 5);
      
      const recentImagesContainer = document.getElementById('recent-images');
      const noRecentImages = document.getElementById('no-recent-images');
      
      if (recentImages.length === 0) {
        recentImagesContainer.style.display = 'none';
        noRecentImages.style.display = 'block';
      } else {
        recentImagesContainer.style.display = 'grid';
        noRecentImages.style.display = 'none';
        recentImagesContainer.innerHTML = '';
        
        recentImages.forEach(image => {
          const imageCard = document.createElement('div');
          imageCard.className = 'image-card';
          imageCard.innerHTML = `
            <div class="image-thumbnail">
              <img src="${image.url}" alt="${image.description}">
            </div>
            <div class="image-info">
              <h3>${image.description}</h3>
              <div class="image-meta">
                ${formatDate(image.uploadedAt)}
              </div>
            </div>
          `;
          imageCard.addEventListener('click', () => showImageDetail(image.id));
          recentImagesContainer.appendChild(imageCard);
        });
      }
    }

    // ä¿®æ”¹å¯†ç 
    function changePassword(newPassword) {
      // è¿™é‡Œåªæ˜¯æ¨¡æ‹Ÿä¿®æ”¹å¯†ç ï¼Œå®é™…é¡¹ç›®ä¸­åº”è¯¥æœ‰æ›´å®‰å…¨çš„å®ç°
      localStorage.setItem(`user-${currentUser}-password`, newPassword);
      return true;
    }

    // é€€å‡ºç™»å½•
    function logout() {
      currentUser = null;
      localStorage.removeItem('couple-username');
      showLoginPage();
    }

    // çºªå¿µæ—¥ç›¸å…³å‡½æ•°
    function loadAnniversaries() {
      const anniversaries = JSON.parse(localStorage.getItem('couple-anniversaries') || '[]');
      const container = document.getElementById('anniversaries-container');
      const noAnniversaries = document.getElementById('no-anniversaries');
      
      if (anniversaries.length === 0) {
        noAnniversaries.style.display = 'block';
        container.innerHTML = '';
      } else {
        noAnniversaries.style.display = 'none';
        container.innerHTML = '';
        
        anniversaries.forEach((anniversary, index) => {
          const daysUntil = getDaysUntilAnniversary(anniversary.date);
          const anniversaryElement = document.createElement('div');
          anniversaryElement.style.cssText = `
            background-color: rgba(5, 5, 20, 0.9);
            border: 1px solid rgba(10, 255, 255, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 
              0 0 20px rgba(10, 255, 255, 0.25),
              0 0 40px rgba(255, 10, 150, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
          `;
          
          anniversaryElement.innerHTML = `
            <div style="flex: 1;">
              <h4 style="
                color: #f0f;
                margin-bottom: 10px;
                text-shadow: 0 0 8px rgba(255, 10, 150, 0.7);
              ">${anniversary.title}</h4>
              <p style="
                color: rgba(10, 255, 255, 0.8);
                margin-bottom: 5px;
              ">æ—¥æœŸ: ${formatDate(anniversary.date)}</p>
              <p style="
                font-size: 1.1rem;
                font-weight: 600;
                ${daysUntil === 0 ? 'color: #0f0; text-shadow: 0 0 10px rgba(10, 255, 10, 0.7);' : 
                  daysUntil < 30 ? 'color: #f0f; text-shadow: 0 0 10px rgba(255, 10, 150, 0.7);' : 
                  'color: rgba(10, 255, 255, 0.8);'}
              ">
                ${daysUntil === 0 ? 'ğŸ‰ ä»Šå¤©å°±æ˜¯çºªå¿µæ—¥ï¼' : 
                  daysUntil === 1 ? 'â° æ˜å¤©å°±æ˜¯çºªå¿µæ—¥ï¼' : 
                  `è·ç¦»çºªå¿µæ—¥è¿˜æœ‰ ${daysUntil} å¤©`}
              </p>
            </div>
            <button onclick="deleteAnniversary(${index})" style="
              padding: 10px 20px;
              background-color: rgba(255, 10, 10, 0.25);
              color: #f00;
              border: 1px solid #f00;
              border-radius: 8px;
              cursor: pointer;
              font-size: 1rem;
              font-weight: 600;
              transition: all 0.4s ease;
              box-shadow: 
                0 0 15px rgba(255, 10, 10, 0.4),
                inset 0 0 15px rgba(255, 10, 10, 0.1);
            ">
              åˆ é™¤
            </button>
          `;
          container.appendChild(anniversaryElement);
        });
      }
    }

    function getDaysUntilAnniversary(anniversaryDate) {
      const today = new Date();
      const anniversary = new Date(anniversaryDate);
      const currentYearAnniversary = new Date(today.getFullYear(), anniversary.getMonth(), anniversary.getDate());
      
      let targetDate = currentYearAnniversary;
      if (targetDate < today) {
        targetDate = new Date(today.getFullYear() + 1, anniversary.getMonth(), anniversary.getDate());
      }
      
      const timeDiff = targetDate.getTime() - today.getTime();
      return Math.ceil(timeDiff / (1000 * 3600 * 24));
    }

    function addAnniversary(event) {
      event.preventDefault();
      const title = document.getElementById('anniversary-title').value;
      const date = document.getElementById('anniversary-date').value;
      
      if (!title || !date) return;
      
      const anniversaries = JSON.parse(localStorage.getItem('couple-anniversaries') || '[]');
      anniversaries.push({ title, date });
      localStorage.setItem('couple-anniversaries', JSON.stringify(anniversaries));
      
      document.getElementById('anniversary-form').reset();
      loadAnniversaries();
      showAnniversaryNotification();
    }

    function deleteAnniversary(index) {
      if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªçºªå¿µæ—¥å—ï¼Ÿ')) {
        const anniversaries = JSON.parse(localStorage.getItem('couple-anniversaries') || '[]');
        anniversaries.splice(index, 1);
        localStorage.setItem('couple-anniversaries', JSON.stringify(anniversaries));
        loadAnniversaries();
      }
    }

    function showAnniversaryNotification() {
      const anniversaries = JSON.parse(localStorage.getItem('couple-anniversaries') || '[]');
      const upcomingAnniversaries = anniversaries.filter(anniversary => {
        const daysUntil = getDaysUntilAnniversary(anniversary.date);
        return daysUntil <= 7 && daysUntil >= 0;
      });
      
      if (upcomingAnniversaries.length > 0) {
        setTimeout(() => {
          const notification = document.createElement('div');
          notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(5, 5, 15, 0.95);
            border: 1px solid rgba(10, 255, 255, 0.4);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 
              0 0 30px rgba(10, 255, 255, 0.5),
              0 0 60px rgba(255, 10, 150, 0.3);
            z-index: 1000;
            max-width: 350px;
            animation: slideIn 0.5s ease-out;
          `;
          
          const notificationContent = upcomingAnniversaries.map(anniversary => {
            const daysUntil = getDaysUntilAnniversary(anniversary.date);
            return `
              <div style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid rgba(10, 255, 255, 0.3);">
                <h4 style="color: #f0f; margin-bottom: 5px;">${anniversary.title}</h4>
                <p style="color: rgba(10, 255, 255, 0.8);">
                  ${daysUntil === 0 ? 'ğŸ‰ ä»Šå¤©å°±æ˜¯çºªå¿µæ—¥ï¼' : 
                    daysUntil === 1 ? 'â° æ˜å¤©å°±æ˜¯çºªå¿µæ—¥ï¼' : 
                    `è¿˜æœ‰ ${daysUntil} å¤©`}
                </p>
              </div>
            `;
          }).join('');
          
          notification.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
              <h3 style="color: #0ff; text-shadow: 0 0 10px rgba(10, 255, 255, 0.7); margin: 0;">
                ğŸ‰ çºªå¿µæ—¥æé†’
              </h3>
              <button onclick="this.parentElement.parentElement.remove()" style="
                background: none;
                border: none;
                color: #0ff;
                font-size: 1.2rem;
                cursor: pointer;
                padding: 0;
                line-height: 1;
              ">Ã—</button>
            </div>
            ${notificationContent}
          `;
          
          document.body.appendChild(notification);
          
          setTimeout(() => {
            notification.style.animation = 'slideOut 0.5s ease-in forwards';
            setTimeout(() => notification.remove(), 500);
          }, 10000);
        }, 1000);
      }
    }

    // ä¸ºçºªå¿µæ—¥è¡¨å•æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
    document.addEventListener('DOMContentLoaded', function() {
      const anniversaryForm = document.getElementById('anniversary-form');
      if (anniversaryForm) {
        anniversaryForm.addEventListener('submit', addAnniversary);
      }
    });

    // åœ¨åŠ è½½ä¸ªäººä¸­å¿ƒæ—¶åŠ è½½çºªå¿µæ—¥
    function loadProfileInfo() {
      // æ˜¾ç¤ºç”¨æˆ·å
      document.getElementById('profile-username').textContent = currentUser;
      
      // æ˜¾ç¤ºé‚®ç®±
      const userEmail = localStorage.getItem(`user-${currentUser}-email`);
      document.getElementById('profile-email').textContent = userEmail || '';
      
      // æ˜¾ç¤ºæ³¨å†Œæ—¶é—´
      const joinedDate = localStorage.getItem(`user-${currentUser}-joined`);
      if (joinedDate) {
        document.getElementById('profile-joined-date').textContent = formatDate(joinedDate);
      } else {
        const now = new Date().toISOString();
        localStorage.setItem(`user-${currentUser}-joined`, now);
        document.getElementById('profile-joined-date').textContent = formatDate(now);
      }
      
      // æ˜¾ç¤ºæœ€åç™»å½•æ—¶é—´
      const lastLogin = localStorage.getItem(`user-${currentUser}-last-login`);
      if (lastLogin) {
        document.getElementById('profile-last-login').textContent = formatDate(lastLogin);
      } else {
        const now = new Date().toISOString();
        localStorage.setItem(`user-${currentUser}-last-login`, now);
        document.getElementById('profile-last-login').textContent = formatDate(now);
      }
      
      // è®¡ç®—ä¸Šä¼ ç»Ÿè®¡
      calculateUploadStats();
      
      // æ˜¾ç¤ºæœ€è¿‘ä¸Šä¼ 
      showRecentUploads();
      
      // åŠ è½½çºªå¿µæ—¥
      loadAnniversaries();
    }

    // äº’åŠ¨åŠŸèƒ½ç›¸å…³å‡½æ•°
    function addInteractionFeatures(imageId) {
      const interactionSection = document.getElementById('interaction-section');
      if (!interactionSection) return;
      
      // è·å–ç‚¹èµå’Œè¯„è®ºæ•°æ®
      const likeData = getLikeData(imageId);
      const comments = getComments(imageId);
      
      interactionSection.innerHTML = `
        <!-- ç‚¹èµåŠŸèƒ½ -->
        <div style="
          margin: 20px 0;
          padding: 20px;
          background-color: rgba(5, 5, 15, 0.9);
          border: 1px solid rgba(10, 255, 255, 0.4);
          border-radius: 12px;
          box-shadow: 
            0 0 25px rgba(10, 255, 255, 0.25),
            0 0 50px rgba(255, 10, 150, 0.15);
        ">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <button 
              onclick="toggleLike(${imageId})"
              id="like-button-${imageId}"
              style="
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 12px 24px;
                background-color: ${likeData.liked ? 'rgba(255, 10, 150, 0.4)' : 'rgba(255, 10, 150, 0.25)'};
                color: #f0f;
                border: 1px solid #f0f;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 600;
                transition: all 0.4s ease;
                box-shadow: 
                  0 0 15px rgba(255, 10, 150, ${likeData.liked ? '0.6' : '0.4'}),
                  inset 0 0 15px rgba(255, 10, 150, 0.1);
              "
            >
              <span id="like-icon-${imageId}">${likeData.liked ? 'â¤ï¸' : 'ğŸ¤'}</span>
              <span>${likeData.liked ? 'å·²ç‚¹èµ' : 'ç‚¹èµ'}</span>
              <span id="like-count-${imageId}">${likeData.count}</span>
            </button>
            <span style="
              color: rgba(10, 255, 255, 0.8);
              font-size: 0.9rem;
            ">
              <span id="comment-count-${imageId}">${comments.length}</span> æ¡è¯„è®º
            </span>
          </div>
        </div>
        
        <!-- è¯„è®ºåŠŸèƒ½ -->
        <div style="
          margin: 20px 0;
          padding: 20px;
          background-color: rgba(5, 5, 15, 0.9);
          border: 1px solid rgba(10, 255, 255, 0.4);
          border-radius: 12px;
          box-shadow: 
            0 0 25px rgba(10, 255, 255, 0.25),
            0 0 50px rgba(255, 10, 150, 0.15);
        ">
          <h3 style="
            color: #f0f;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 10, 150, 0.7);
          ">è¯„è®º</h3>
          
          <!-- è¯„è®ºè¾“å…¥ -->
          <form onsubmit="addComment(event, ${imageId})">
            <div class="form-group">
              <label for="comment-content-${imageId}">æ·»åŠ è¯„è®º</label>
              <textarea 
                id="comment-content-${imageId}" 
                rows="3" 
                placeholder="å†™ä¸‹ä½ çš„è¯„è®º..."
                required
              ></textarea>
            </div>
            <button type="submit" class="btn btn-primary">å‘å¸ƒè¯„è®º</button>
          </form>
          
          <!-- è¯„è®ºåˆ—è¡¨ -->
          <div id="comments-list-${imageId}" style="
            margin-top: 25px;
            max-height: 400px;
            overflow-y: auto;
          ">
            ${comments.length === 0 ? `
              <div style="
                text-align: center;
                padding: 40px;
                color: rgba(10, 255, 255, 0.6);
              ">
                æš‚æ— è¯„è®ºï¼Œå¿«æ¥å‘è¡¨ç¬¬ä¸€æ¡è¯„è®ºå§ï¼
              </div>
            ` : comments.map(comment => `
              <div style="
                background-color: rgba(5, 5, 20, 0.9);
                border: 1px solid rgba(10, 255, 255, 0.4);
                border-radius: 10px;
                padding: 15px;
                margin-bottom: 15px;
                box-shadow: 
                  0 0 20px rgba(10, 255, 255, 0.25),
                  0 0 40px rgba(255, 10, 150, 0.15);
              ">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                  <h4 style="
                    color: #f0f;
                    margin: 0;
                    text-shadow: 0 0 8px rgba(255, 10, 150, 0.7);
                  ">${comment.author}</h4>
                  <span style="
                    color: rgba(10, 255, 255, 0.6);
                    font-size: 0.8rem;
                  ">${formatDate(comment.timestamp)}</span>
                </div>
                <p style="
                  color: rgba(10, 255, 255, 0.8);
                  line-height: 1.6;
                  margin: 0;
                ">${comment.content}</p>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function getLikeData(imageId) {
      const likeData = JSON.parse(localStorage.getItem('couple-likes') || '{}');
      if (!likeData[imageId]) {
        likeData[imageId] = {
          count: 0,
          likedBy: []
        };
        localStorage.setItem('couple-likes', JSON.stringify(likeData));
      }
      
      return {
        count: likeData[imageId].count,
        liked: likeData[imageId].likedBy.includes(currentUser)
      };
    }

    function toggleLike(imageId) {
      const likeData = JSON.parse(localStorage.getItem('couple-likes') || '{}');
      if (!likeData[imageId]) {
        likeData[imageId] = {
          count: 0,
          likedBy: []
        };
      }
      
      const userIndex = likeData[imageId].likedBy.indexOf(currentUser);
      if (userIndex > -1) {
        // å–æ¶ˆç‚¹èµ
        likeData[imageId].likedBy.splice(userIndex, 1);
        likeData[imageId].count--;
      } else {
        // ç‚¹èµ
        likeData[imageId].likedBy.push(currentUser);
        likeData[imageId].count++;
      }
      
      localStorage.setItem('couple-likes', JSON.stringify(likeData));
      
      // æ›´æ–°UI
      addInteractionFeatures(imageId);
    }

    function getComments(imageId) {
      const commentsData = JSON.parse(localStorage.getItem('couple-comments') || '{}');
      return commentsData[imageId] || [];
    }

    function addComment(event, imageId) {
      event.preventDefault();
      const content = document.getElementById(`comment-content-${imageId}`).value;
      if (!content) return;
      
      const commentsData = JSON.parse(localStorage.getItem('couple-comments') || '{}');
      if (!commentsData[imageId]) {
        commentsData[imageId] = [];
      }
      
      const newComment = {
        id: Date.now(),
        author: currentUser,
        content: content,
        timestamp: new Date().toISOString()
      };
      
      commentsData[imageId].push(newComment);
      localStorage.setItem('couple-comments', JSON.stringify(commentsData));
      
      // æ¸…ç©ºè¾“å…¥æ¡†
      document.getElementById(`comment-content-${imageId}`).value = '';
      
      // æ›´æ–°UI
      addInteractionFeatures(imageId);
    }

    // æ•°æ®å¯¼å‡ºåŠŸèƒ½
    function exportData() {
      const data = {
        images: JSON.parse(localStorage.getItem('couple-images') || '[]'),
        tags: JSON.parse(localStorage.getItem('couple-tags') || '[]'),
        anniversaries: JSON.parse(localStorage.getItem('couple-anniversaries') || '[]'),
        likes: JSON.parse(localStorage.getItem('couple-likes') || '{}'),
        comments: JSON.parse(localStorage.getItem('couple-comments') || '{}')
      };
      
      const dataStr = JSON.stringify(data, null, 2);
      const dataBlob = new Blob([dataStr], {type: 'application/json'});
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `couple-memories-${new Date().toISOString().split('T')[0]}.json`;
      link.click();
      URL.revokeObjectURL(url);
      
      showDataSyncNotification('æ•°æ®å¯¼å‡ºæˆåŠŸï¼æ‚¨å¯ä»¥å°†æ­¤æ–‡ä»¶ä¿å­˜å¹¶åœ¨å…¶ä»–è®¾å¤‡ä¸Šå¯¼å…¥ã€‚');
    }

    // æ•°æ®å¯¼å…¥åŠŸèƒ½
    function importData(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const data = JSON.parse(e.target.result);
          
          // å¯¼å…¥æ•°æ®
          if (data.images) localStorage.setItem('couple-images', JSON.stringify(data.images));
          if (data.tags) localStorage.setItem('couple-tags', JSON.stringify(data.tags));
          if (data.anniversaries) localStorage.setItem('couple-anniversaries', JSON.stringify(data.anniversaries));
          if (data.likes) localStorage.setItem('couple-likes', JSON.stringify(data.likes));
          if (data.comments) localStorage.setItem('couple-comments', JSON.stringify(data.comments));
          
          showDataSyncNotification('æ•°æ®å¯¼å…¥æˆåŠŸï¼é¡µé¢å°†è‡ªåŠ¨åˆ·æ–°ã€‚');
          setTimeout(() => {
            location.reload();
          }, 2000);
        } catch (error) {
          alert('æ•°æ®å¯¼å…¥å¤±è´¥ï¼Œè¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ã€‚');
        }
      };
      reader.readAsText(file);
    }

    // æ˜¾ç¤ºæ•°æ®åŒæ­¥é€šçŸ¥
    function showDataSyncNotification(message) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: rgba(5, 5, 15, 0.95);
        border: 1px solid rgba(10, 255, 255, 0.4);
        border-radius: 10px;
        padding: 20px;
        box-shadow: 
          0 0 30px rgba(10, 255, 255, 0.5),
          0 0 60px rgba(255, 10, 150, 0.3);
        z-index: 1000;
        max-width: 350px;
        animation: slideIn 0.5s ease-out;
      `;
      
      notification.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
          <h3 style="color: #0ff; text-shadow: 0 0 10px rgba(10, 255, 255, 0.7); margin: 0;">
            ğŸ’¾ æ•°æ®åŒæ­¥
          </h3>
          <button onclick="this.parentElement.parentElement.remove()" style="
            background: none;
            border: none;
            color: #0ff;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
          ">Ã—</button>
        </div>
        <p style="color: rgba(10, 255, 255, 0.8); margin: 0;">
          ${message}
        </p>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.5s ease-in forwards';
        setTimeout(() => notification.remove(), 500);
      }, 3000);
    }

    // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
    function switchTheme(theme) {
      localStorage.setItem('couple-theme', theme);
      applyTheme(theme);
      updateThemeDisplay();
      showThemeNotification(theme);
    }

    function applyTheme(theme) {
      const body = document.body;
      const styleElement = document.getElementById('theme-styles');
      
      let themeStyles = '';
      
      switch(theme) {
        case 'cyberpunk':
          themeStyles = `
            body {
              background-color: #050505;
              background-image: 
                radial-gradient(circle at 20% 30%, rgba(10, 255, 255, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(255, 10, 150, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 40% 80%, rgba(10, 255, 10, 0.1) 0%, transparent 20%),
                linear-gradient(to bottom, rgba(5, 5, 20, 0.95), rgba(5, 5, 15, 1));
              color: #0ff;
            }
            h1, h2, h3 {
              color: #0ff;
              text-shadow: 
                0 0 15px rgba(10, 255, 255, 0.7),
                0 0 30px rgba(10, 255, 255, 0.3);
            }
          `;
          break;
          
        case 'warm':
          themeStyles = `
            body {
              background-color: #1a0f1a;
              background-image: 
                radial-gradient(circle at 20% 30%, rgba(255, 10, 150, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(255, 150, 10, 0.15) 0%, transparent 25%),
                linear-gradient(to bottom, rgba(26, 15, 26, 0.95), rgba(20, 10, 20, 1));
              color: #ff80c0;
            }
            h1, h2, h3 {
              color: #ff80c0;
              text-shadow: 
                0 0 15px rgba(255, 128, 192, 0.7),
                0 0 30px rgba(255, 128, 192, 0.3);
            }
            .card, .header {
              background-color: rgba(26, 15, 26, 0.9);
              border-color: rgba(255, 128, 192, 0.4);
              box-shadow: 
                0 0 25px rgba(255, 128, 192, 0.25),
                0 0 50px rgba(255, 128, 192, 0.15);
            }
          `;
          break;
          
        case 'minimal':
          themeStyles = `
            body {
              background-color: #f5f5f5;
              background-image: 
                linear-gradient(to bottom, #f5f5f5, #e8e8e8);
              color: #333;
            }
            body::before {
              background: none;
            }
            h1, h2, h3 {
              color: #333;
              text-shadow: none;
              background: none !important;
              -webkit-background-clip: text;
              background-clip: text;
              color: #333 !important;
              animation: none !important;
            }
            .card, .header {
              background-color: rgba(255, 255, 255, 0.9);
              border-color: rgba(0, 0, 0, 0.1);
              box-shadow: 
                0 0 25px rgba(0, 0, 0, 0.1),
                0 0 50px rgba(0, 0, 0, 0.05);
            }
            .btn {
              background-color: rgba(0, 0, 0, 0.1);
              color: #333;
              border-color: rgba(0, 0, 0, 0.2);
              box-shadow: none;
            }
            .btn:hover {
              background-color: rgba(0, 0, 0, 0.2);
              box-shadow: none;
            }
          `;
          break;
      }
      
      if (styleElement) {
        styleElement.textContent = themeStyles;
      } else {
        const newStyleElement = document.createElement('style');
        newStyleElement.id = 'theme-styles';
        newStyleElement.textContent = themeStyles;
        document.head.appendChild(newStyleElement);
      }
    }

    function updateThemeDisplay() {
      const currentThemeElement = document.getElementById('current-theme');
      if (currentThemeElement) {
        const currentTheme = localStorage.getItem('couple-theme') || 'cyberpunk';
        const themeNames = {
          'cyberpunk': 'èµ›åšæœ‹å…‹',
          'warm': 'æ¸©é¦¨',
          'minimal': 'æç®€'
        };
        currentThemeElement.textContent = themeNames[currentTheme] || 'èµ›åšæœ‹å…‹';
      }
    }

    function showThemeNotification(theme) {
      const themeNames = {
        'cyberpunk': 'èµ›åšæœ‹å…‹',
        'warm': 'æ¸©é¦¨',
        'minimal': 'æç®€'
      };
      
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: rgba(5, 5, 15, 0.95);
        border: 1px solid rgba(10, 255, 255, 0.4);
        border-radius: 10px;
        padding: 20px;
        box-shadow: 
          0 0 30px rgba(10, 255, 255, 0.5),
          0 0 60px rgba(255, 10, 150, 0.3);
        z-index: 1000;
        max-width: 350px;
        animation: slideIn 0.5s ease-out;
      `;
      
      notification.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
          <h3 style="color: #0ff; text-shadow: 0 0 10px rgba(10, 255, 255, 0.7); margin: 0;">
            ğŸ¨ ä¸»é¢˜åˆ‡æ¢
          </h3>
          <button onclick="this.parentElement.parentElement.remove()" style="
            background: none;
            border: none;
            color: #0ff;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
          ">Ã—</button>
        </div>
        <p style="color: rgba(10, 255, 255, 0.8); margin: 0;">
          ä¸»é¢˜å·²åˆ‡æ¢ä¸º <strong style="color: #f0f;">${themeNames[theme]}</strong> é£æ ¼ï¼
        </p>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.5s ease-in forwards';
        setTimeout(() => notification.remove(), 500);
      }, 3000);
    }

    // åˆå§‹åŒ–ä¸»é¢˜
    function initTheme() {
      const savedTheme = localStorage.getItem('couple-theme') || 'cyberpunk';
      applyTheme(savedTheme);
      updateThemeDisplay();
    }

    // åœ¨é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–ä¸»é¢˜
    document.addEventListener('DOMContentLoaded', function() {
      initTheme();
    });

    // æ·»åŠ åŠ¨ç”»
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>